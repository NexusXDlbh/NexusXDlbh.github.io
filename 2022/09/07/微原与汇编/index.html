<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>微原与汇编 | Meta Field</title><meta name="author" content="NexusLbh"><meta name="copyright" content="NexusLbh"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="微机原理与汇编语言难舍难分，某乎上建议先把汇编过一遍的同时学习微原效果非常好，再加上本人的确有深入理解计算机系统的需求，所以开了这篇博客。 本篇博客随着学校进度更新。">
<meta property="og:type" content="article">
<meta property="og:title" content="微原与汇编">
<meta property="og:url" content="http://nexuslbh.top/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/index.html">
<meta property="og:site_name" content="Meta Field">
<meta property="og:description" content="微机原理与汇编语言难舍难分，某乎上建议先把汇编过一遍的同时学习微原效果非常好，再加上本人的确有深入理解计算机系统的需求，所以开了这篇博客。 本篇博客随着学校进度更新。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://w.wallhaven.cc/full/gp/wallhaven-gp71rd.png">
<meta property="article:published_time" content="2022-09-07T08:35:38.000Z">
<meta property="article:modified_time" content="2022-10-19T10:22:38.187Z">
<meta property="article:author" content="NexusLbh">
<meta property="article:tag" content="ComputerSystem">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://w.wallhaven.cc/full/gp/wallhaven-gp71rd.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://nexuslbh.top/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '微原与汇编',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-19 18:22:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/font.css"><meta name="generator" content="Hexo 5.4.2"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">55</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://w.wallhaven.cc/full/gp/wallhaven-gp71rd.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Meta Field"><span class="site-name">Meta Field</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">微原与汇编</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-07T08:35:38.000Z" title="发表于 2022-09-07 16:35:38">2022-09-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-19T10:22:38.187Z" title="更新于 2022-10-19 18:22:38">2022-10-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ComputerSystem/">ComputerSystem</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="微原与汇编"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>微机原理与汇编语言难舍难分，某乎上建议先把汇编过一遍的同时学习微原效果非常好，再加上本人的确有深入理解计算机系统的需求，所以开了这篇博客。</p>
<p>本篇博客随着学校进度更新。</p>
<span id="more"></span>
<h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1 前言"></a>1 前言</h2><p>基于8086/8088的汇编语言+微机原理</p>
<p>参考教材：</p>
<p>①《微型计算机原理及技术接口第三版》-裘雪红 车向泉 西电出版社</p>
<p>②《汇编语言第四版》-王爽 清华大学出版社</p>
<p>③《CS:APP》-机械工业出版社</p>
<h2 id="2-Intel单核处理器-8086-16位"><a href="#2-Intel单核处理器-8086-16位" class="headerlink" title="2 Intel单核处理器(8086-16位)"></a>2 Intel单核处理器(8086-16位)</h2><p>时代进步很快，RISC,CISC已经非常流行，但是为什么要学8086？</p>
<p>个人认为单核是多核的基础，从8086 CPU开始，Intel CPU设计采用了向后兼容（backward compatibility，也称作向下兼容Downward Compatibility）的特性。8086是Intel CPU的基石，非常经典，8086的设计思想不可或缺。</p>
<p>8086是16位结构，16根数据线，一次最多传1个字，用<code>mov</code>指令给出16位寄存器就可以进行16位数据传送。</p>
<h3 id="2-1-1-8086-8088功能特性"><a href="#2-1-1-8086-8088功能特性" class="headerlink" title="2.1.1 8086/8088功能特性"></a>2.1.1 8086/8088功能特性</h3><p>①CPU内部有<strong>14</strong>个<strong>16位的</strong><u>程序员可见的</u><strong>寄存器</strong>。</p>
<p>②支持多种寻址方式；不支持浮点数运算。</p>
<p>③指令的操作数可以是16位的，也可以是8位的。（类似32位的程序也可以在64位上跑）</p>
<p>④独立编址（*RISC是统一编址）</p>
<p>⑤内存、接口按字节(Byte)编址。</p>
<p>⑥内存地址空间分段，可寻址1MB；接口地址空间不分段，可寻址64KB。</p>
<h3 id="2-1-2-8086功能特性（与上面区分，算是上面的一个子集）"><a href="#2-1-2-8086功能特性（与上面区分，算是上面的一个子集）" class="headerlink" title="2.1.2 8086功能特性（与上面区分，算是上面的一个子集）"></a>2.1.2 8086功能特性（与上面区分，算是上面的一个子集）</h3><p>①CPU内部有<strong>14</strong>个<strong>16位的</strong><u>程序员可见的</u><strong>寄存器</strong>。</p>
<p>②支持多种寻址方式(24种)；不支持浮点数运算。</p>
<p>③操作数类型：位(bit)、字节(byte)、字(word)和块(block)。</p>
<p>④<strong>8、16位</strong><u>无符号和带符号</u><strong>二进制或十进制</strong>运算，包括乘法和除法。</p>
<p>⑤体系结构是针对强大的汇编语言和有效的高级语言设计的。</p>
<p>⑥直接主存寻址能力1MB。</p>
<p><strong>8086与8088区别</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>8086（标准16位微处理器）</th>
<th>8088（准16位微处理器）</th>
</tr>
</thead>
<tbody>
<tr>
<td>内部数据总线</td>
<td>16位</td>
<td>16位</td>
</tr>
<tr>
<td>外部数据总线</td>
<td>16位</td>
<td>8位</td>
</tr>
<tr>
<td>推出时间</td>
<td>1978年</td>
<td>1978年</td>
</tr>
<tr>
<td>地址位数</td>
<td>20位</td>
<td>20位</td>
</tr>
<tr>
<td>寻址空间</td>
<td>1MB</td>
<td>1MB</td>
</tr>
<tr>
<td>指令就绪队列</td>
<td>6 字节</td>
<td>4 字节</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-1-3-8086体系结构"><a href="#2-1-3-8086体系结构" class="headerlink" title="2.1.3 8086体系结构"></a>2.1.3 8086体系结构</h3><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/8086sys.png" style="zoom:48%;"></p>
<h4 id="CPU对内存读写"><a href="#CPU对内存读写" class="headerlink" title="CPU对内存读写"></a>CPU对内存读写</h4><p>㈠读：</p>
<p>①CPU通过<strong>地址总线</strong>向内存发出<strong>地址信息</strong></p>
<p>②CPU通过<strong>控制总线</strong>向内存发出<strong>读</strong>命令，<strong>选中</strong>内存某个芯片，告诉他：<strong>我CPU要读你的数据</strong></p>
<p>③内存将<strong>地址信息</strong>里面的数据通过<strong>数据总线</strong>传给CPU</p>
<p>㈡写：</p>
<p>①CPU通过<strong>地址总线</strong>向内存发出<strong>地址信息</strong></p>
<p>②CPU通过<strong>控制总线</strong>向内存发出<strong>写</strong>命令，<strong>选中</strong>内存某个芯片，告诉他：<strong>我CPU要给你写数据</strong></p>
<p>③CPU将数据通过<strong>数据总线</strong>传给内存对应<strong>地址</strong>的存储单元</p>
<p><strong>注意</strong></p>
<p>CPU访问存储器时，地址总线AB上送出的是<strong>物理地址</strong>，编程时采用的则是<strong>逻辑地址</strong>。</p>
<h4 id="微处理器执行程序的步骤"><a href="#微处理器执行程序的步骤" class="headerlink" title="微处理器执行程序的步骤"></a>微处理器执行程序的步骤</h4><ol>
<li>从内存储器(Cache)中取出一条指令,分析指令<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>操作码</li>
<li>从内存储器(Cache)或寄存器中获取数据<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>操作数</li>
<li>执行指令</li>
<li>将结果存入内存储器(Cache)或寄存器中</li>
</ol>
<p>微处理器在取操作码、存取操作数时要占用总线，而分析操作码和执行指令时不占用总线，因此在执行指令的过程中，总线会出现空闲时间，而不能被充分利用。</p>
<p>为了能充分利用总线，8086/8088微处理器的内部结构从功能上被设计为两个独立的功能部件：<strong>总线接口单元BIU</strong>与<strong>执行单元EU</strong>。</p>
<h4 id="内部组成1-总线接口单元BIU-Bus-Interface-Unit-取指令"><a href="#内部组成1-总线接口单元BIU-Bus-Interface-Unit-取指令" class="headerlink" title="内部组成1-总线接口单元BIU(Bus Interface Unit,取指令)"></a>内部组成1-总线接口单元BIU(Bus Interface Unit,取指令)</h4><p>负责与存储器、I/O接口传递数据，具体完成：</p>
<p>①从内存取指令，送到指令队列</p>
<p>②配合EU从指定的内存单元或IO端口取数据</p>
<p>③将EU的操作结果送到指定的内存单元或IO端口</p>
<p><strong>常见IO接口</strong></p>
<p>VGA(Video Graphics Array即视频图形阵列),USB,标准视频输入接口,音频输入输出接口。</p>
<h4 id="内部组成2-执行单元EU-Execute-Unit-执行指令"><a href="#内部组成2-执行单元EU-Execute-Unit-执行指令" class="headerlink" title="内部组成2-执行单元EU(Execute Unit,执行指令)"></a>内部组成2-执行单元EU(Execute Unit,执行指令)</h4><p>负责指令的执行，（算术、逻辑、移位运算，有效地址计算，控制命令、……）</p>
<h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><p>①BIU取指令，EU执行指令，二者相互独立相互配合</p>
<p>②指令队列有2+空字节，BIU自动取指 → 队列</p>
<p>③EU总是从队列前部取指令去执行</p>
<p>④指令需要访问M或I/O，EU会请求BIU去完成</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/86s1.png" style="zoom:80%;"></p>
<h4 id="8086寄存器结构"><a href="#8086寄存器结构" class="headerlink" title="8086寄存器结构"></a>8086寄存器结构</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/86s2.png" style="zoom:80%;"></p>
<p>✍<strong>内存中字的存储</strong></p>
<p>CPU用16位<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>1个字，高8位<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>高字节，低8位<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>低字节；内存中一个内存单元就是一个字节，占8位，<strong>所以一个字要两个内存单元。</strong></p>
<p>N地址字单元：N和N+1内存单元组成的地址，<strong>注意：高地址在前</strong></p>
<p><strong>数据寄存器</strong></p>
<p>8086有4个16位的数据寄存器：AX,BX,CX,DX。每个寄存器又可以分为高、低字节独立的2个8位寄存器：高8位AH(High)，低8位AL(Low)。</p>
<p>位bit，字节byte=8bit，字word=2byte</p>
<p>同时这4个数据寄存器有特殊用途：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>寄存器</th>
<th>特殊用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>AX</td>
<td>字节乘（乘积），字节除（被除数），字IO，字乘法（乘数/乘积L），字除法（被除数L/商）</td>
</tr>
<tr>
<td>AL</td>
<td>字节乘（乘数），字节除（商），字节IO，十进制运算校正</td>
</tr>
<tr>
<td>BX</td>
<td>段内偏移地址</td>
</tr>
<tr>
<td>CX</td>
<td>串操作计数，循环计数(loop)，存储程序字节数（王爽实验4-3）</td>
</tr>
<tr>
<td>CL</td>
<td>移位次数</td>
</tr>
<tr>
<td>DX</td>
<td>字乘法（乘积H），字除法（被除数H），IO地址</td>
</tr>
</tbody>
</table>
</div>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/86s3.png" style="zoom:80%;"><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/86s4.png" style="zoom:80%;"></p>
<p>A:Accumulator,又叫累加器</p>
<p>B:Base,基址寄存器，可当作指针，可以用来寄存器间接寻址:[BX],后面汇编语言中如果写<code>MOV CL,[BX]</code>是对的，但是如果写<code>MOV CL,[AX]</code>或者CX,DX都不行！</p>
<p>C:Count,计数/移位。移位次数大于1的默认存在CX中。</p>
<p><strong>指针寄存器2个</strong></p>
<p>SP：堆栈指针寄存器，存放堆栈区偏移地址，指示堆栈的当前操作位置</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>【注意】堆栈主要用于  保护断点和现场</th>
</tr>
</thead>
<tbody>
<tr>
<td>①暂存数据</td>
</tr>
<tr>
<td>②为程序保存提供返回地址:子程序调用CALL指令用堆栈保存程序返回地址，子程序返回指令RET从堆栈取出返回地址。</td>
</tr>
<tr>
<td>③对于堆栈区域中存储单元的寻址是一种特殊的【存储器操作数】的寻址方式，它利用两个寄存器访问：堆栈指针SP和堆栈段寄存器SS；</td>
</tr>
</tbody>
</table>
</div>
<p>BP：基数指针寄存器，存放主存基本偏移地址</p>
<p><strong>变址寄存器2个</strong></p>
<p>SI：源变址寄存器，指向源操作数</p>
<p>DI：目的变址寄存器，指向目的操作数</p>
<p>SI,DI可自动修改内容</p>
<p><strong>访问数据段能当指针的有：</strong>SI,DI,BX</p>
<p><strong>控制寄存器2个</strong></p>
<p>IP：指令指针寄存器，指示当前指令所在存储单元的<strong>段内偏移地址</strong>。每当8086依据CS和IP从主存取得一个指令字节后，IP自动+1，指向下一个要读取的指令字节。</p>
<p>PSW(背)：<strong>程序状态字</strong>，也叫状态寄存器或<strong>标志寄存器</strong>，共16位，暂定义9个标志位，存放8086CPU在工作中的状态信息。<strong>清零和置1要记住</strong></p>
<p>会使用和编程即可，FLAGS/PSW可以不用记</p>
<p>（记法：CPAZ,STIDO）</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">FLAGS/PSW</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">AF（8086）</td>
<td>辅助进位标志位：低4位向高4位如果有进位，AF置1，做BCD加法运算时判断是否修正</td>
</tr>
<tr>
<td style="text-align:left">CF</td>
<td>进位/借位标志位：<strong>无符号数</strong>加减有进位或借位时置1</td>
</tr>
<tr>
<td style="text-align:left">PF</td>
<td>奇偶标志位</td>
</tr>
<tr>
<td style="text-align:left">SF</td>
<td>符号标志位：对应运算结果最高位</td>
</tr>
<tr>
<td style="text-align:left">ZF</td>
<td>0标志位：运算结果为0<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>置1</td>
</tr>
<tr>
<td style="text-align:left">DF（8088）</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">IF</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">OF</td>
<td>溢出标志位</td>
</tr>
<tr>
<td style="text-align:left">TF</td>
</tr>
</tbody>
</table>
</div>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/flag.png" style="zoom:70%;"><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/flag1.png" style="zoom:70%;"></p>
<p><strong>段寄存器</strong></p>
<p>通用用途：</p>
<p>8086CPU在访问内存时由这4个段寄存器提供<strong>内存单元的段地址</strong>，<strong>不同种类</strong>的段寄存器存储<strong>不同属性段</strong>的段地址，与段内偏移地址一起确定主存的物理地址（后面会讲）。</p>
<p>通过四个段寄存器，<strong>CPU每次可同时对4个段进行寻址</strong>，即可同时提供容量达64KB的程序区（CS），64KB的堆栈区（SS）、128KB的数据区（DS &amp; ES）。</p>
<p>CS：指示程序区，存储段高16位地址，剩下4位默认为0</p>
<p>DS：指示数据区</p>
<p>ES：指示数据区(附加段)</p>
<p>SS：指示堆栈区，<strong>8086栈顶对应小地址</strong></p>
<p><strong>8086不支持将数据直接送入段寄存器</strong>，比如你直接写<code>MOV DS 1000H</code>是非法的，要想将数据送入DS，<strong>只能先将数据送入一个一般的寄存器比如BX，再通过BX把内容送入DS。</strong>至于说为什么这样干，我们不必深究，知道有这么一回事就行。</p>
<p>👋<strong>拓展:DS和[address]</strong></p>
<p>DS：存放要访问的数据的段地址</p>
<p>比如我们要访问10000H单元的内容，可以这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov bx,1000H</span><br><span class="line">mov ds,bx</span><br><span class="line">mov al,[0]</span><br></pre></td></tr></table></figure>
<p>第三条指令作用：将内存单元中的内容送入寄存器中</p>
<p>[<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="2.652ex" height="0.271ex" role="img" focusable="false" viewbox="0 -120 1172 120"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2026" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z"/></g></g></g></svg></mjx-container>]表示一个内存单元，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="2.652ex" height="0.271ex" role="img" focusable="false" viewbox="0 -120 1172 120"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2026" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z"/></g></g></g></svg></mjx-container>表示内存单元的偏移地址，段地址怎么办？8086CPU<strong>自动</strong>取DS中的数据作为段地址。</p>
<p>[BX]：偏移地址BX中的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DS&lt;=====&gt;BX,SI,DI</span><br><span class="line">CS&lt;=====&gt;IP</span><br><span class="line">SS&lt;=====&gt;SP,BP</span><br></pre></td></tr></table></figure>
<h4 id="8086主存储器和IO结构"><a href="#8086主存储器和IO结构" class="headerlink" title="8086主存储器和IO结构"></a>8086主存储器和IO结构</h4><p>🧐系统讲解此部分知识前，先弄懂几个概念</p>
<p><strong>①16位结构的CPU（16位机，字长为16位）</strong></p>
<p>运算器一次最多处理16位数据；寄存器最大宽度16位；寄存器和运算器之间通路是16位。</p>
<p>内存单元的地址在送上地址总线之前，必须在<strong>CPU中处理、传输、暂存。</strong></p>
<p>✍<strong>注意：8086是16位CPU不代表传送地址是16位！</strong></p>
<p><strong>②8086给地址的方法</strong></p>
<p>8086CPU有20位地址总线，即寻址能力为<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="11.162ex" height="2.072ex" role="img" focusable="false" viewbox="0 -833.9 4933.7 915.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"/></g></g></g><g data-mml-node="mo" transform="translate(1567.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(2623.7,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mi" transform="translate(3123.7,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"/></g><g data-mml-node="mi" transform="translate(4174.7,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"/></g></g></g></svg></mjx-container>。但是在其内部一次性处理、传输、暂存的地址是16位(寄存器只有16位)，如果将地址从内部简单发出，那就是16位的地址，此时表现的寻址能力为<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="11.927ex" height="2.072ex" role="img" focusable="false" viewbox="0 -833.9 5271.7 915.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"/></g></g></g><g data-mml-node="mo" transform="translate(1567.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(2623.7,0)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"/><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(500,0)"/></g><g data-mml-node="mi" transform="translate(3623.7,0)"><path data-c="1D43E" d="M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z"/></g><g data-mml-node="mi" transform="translate(4512.7,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"/></g></g></g></svg></mjx-container>。所以8086有一种给出20位地址的方法。</p>
<script type="math/tex; mode=display">
物理地址=段基址 \times 16 +段内偏移地址</script><p>这种寻址方式的本质是：<strong>物理地址=基础地址+偏移地址</strong>的一种实现。</p>
<p>段基址：段寄存器保存的高16位(段的首地址的<strong>高</strong>16位地址)</p>
<p>段内偏移地址：段中某存储单元 “相对于段基址的偏移量” </p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/js.png" style="zoom:75%;"></p>
<p>段地址由16位寄存器提供，段内地址偏移由IP或EU确定的有效地址(EA)提供。</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="4.023ex" height="1.557ex" role="img" focusable="false" viewbox="0 -666 1778 688"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"/></g></g></g></svg></mjx-container>是二进制数左移4位，16进制数左移一位，末位补0。具体的计组都学过，不再阐述。</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/add1.png" style="zoom:70%;"><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/add2.png" style="zoom:85%;"></p>
<p><strong>③段的概念</strong></p>
<p>🤡这个概念挺会混淆视听的，内存压根没有分段这一说，如果在开始有这样的错误认知，会影响后续的学习。</p>
<p>✍段的划分实际上<strong>来源于CPU</strong>。比如：我们可以认为地址10000H-100FFH的内存单元算一个段，段起始地址为10000H，段地址为1000H，段的大小为100H；当然我们也可以认为地址10000H-1007FH、10080H-100FFH的内存单元是两个段，段的大小都是80H。编程时根据需要，将若干地址连续看成一个段，就是<strong>逻辑段</strong>。<strong>段地址<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="4.023ex" height="1.557ex" role="img" focusable="false" viewbox="0 -666 1778 688"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"/></g></g></g></svg></mjx-container>作为段的起始地址，所以<u>段的起始地址</u>一定是16的倍数(后4位是0)；偏移地址定位段中的内存单元，为16位，所以段长度最大为<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="5.307ex" height="2.072ex" role="img" focusable="false" viewbox="0 -833.9 2345.9 915.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z" transform="translate(500,0)"/></g></g></g><g data-mml-node="mo" transform="translate(1567.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g></g></g></svg></mjx-container>64KB，也可以说：仅用偏移地址来寻址最多寻64KB个内存单元，范围是：0-FFFFH</strong>。</p>
<p>8086系统将1MB存储空间分为若干存储段，每段固定大小64KB，正是8086这样的设计，才有主存储器的IO空间的特殊结构。8086支持20位地址，总共1MB内存，但只能使用640KB，因为其余的必须保留，供系统使用。(见下图)</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/861mb.png" style="zoom:80%;"></p>
<p>8086的RESET叫复位电路，高电平有效，通电后给它大于4个时钟周期的正脉冲，将CS初始化为FFFFH，IP初始化为0000H，所以第一条指令从FFFF0开始取，此处放的是跳转指令，跳到BIOS，然后从小地址到大地之执行。</p>
<p><strong>《汇编语言》实验 查看CPU和内存，用机器指令和汇编指令编程-总结</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#预备知识</span></span><br><span class="line">debug的使用</span><br><span class="line"><span class="comment">#实验要用指令#</span></span><br><span class="line">r：查看CPU中寄存器的内容</span><br><span class="line">rcs：查看并修改cs内容</span><br><span class="line">rip：查看并修改ip内容</span><br><span class="line">d：查看内存的内容</span><br><span class="line">e cs:ip xx xx xx ......：修改内存中的内容</span><br><span class="line">a cs:ip ：以汇编指令的形式向内存写入指令</span><br><span class="line">u：将内存中的内容解释为机器指令和对应的汇编指令</span><br><span class="line">p：遇到loop命令时一口气走完循环</span><br><span class="line">g 地址：直接执行到CS:地址处</span><br></pre></td></tr></table></figure>
<p><strong>1.主存和IO地址空间大小与分体结构</strong></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/stjg.png" style="zoom:50%;"></p>
<p>偶地址空间对应低字节的访问，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.375ex" xmlns="http://www.w3.org/2000/svg" width="6.833ex" height="1.994ex" role="img" focusable="false" viewbox="0 -716 3020.1 881.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mn" transform="translate(783,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g><g data-mml-node="mo" transform="translate(1464.3,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(2520.1,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container>来选择</p>
<p>奇地址空间对应高字节的访问，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="9.603ex" height="2.448ex" role="img" focusable="false" viewbox="0 -1000 4244.6 1082"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"/></g><g data-mml-node="mi" transform="translate(759,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(1647,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g></g><g data-mml-node="mo" transform="translate(0,615)"><svg width="2411" height="237" x="0" y="148" viewbox="602.8 148 2411 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(7.233,1)"/></svg></g></g><g data-mml-node="mo" transform="translate(2688.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(3744.6,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container>来选择</p>
<p>🧐<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="5.455ex" height="2.262ex" role="img" focusable="false" viewbox="0 -1000 2411 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"/></g><g data-mml-node="mi" transform="translate(759,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(1647,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g></g><g data-mml-node="mo" transform="translate(0,615)"><svg width="2411" height="237" x="0" y="148" viewbox="602.8 148 2411 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(7.233,1)"/></svg></g></g></g></g></svg></mjx-container>为何不用<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.828ex" height="2.387ex" role="img" focusable="false" viewbox="0 -1033 1250 1055"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mn" transform="translate(750,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g><g data-mml-node="mo" transform="translate(0,648)"><svg width="1250" height="237" x="0" y="148" viewbox="312.5 148 1250 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(3.75,1)"/></svg></g></g></g></g></svg></mjx-container>代替？</p>
<p>🧑因为8086这两个体可能同时要读地址，即<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="2.828ex" height="1.67ex" role="img" focusable="false" viewbox="0 -716 1250 738"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mn" transform="translate(750,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container>和<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="5.455ex" height="2.262ex" role="img" focusable="false" viewbox="0 -1000 2411 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"/></g><g data-mml-node="mi" transform="translate(759,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(1647,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g></g><g data-mml-node="mo" transform="translate(0,615)"><svg width="2411" height="237" x="0" y="148" viewbox="602.8 148 2411 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(7.233,1)"/></svg></g></g></g></g></svg></mjx-container>可能需要同时有效(低电平)，一个负责低8位，一个负责高8位。</p>
<p>✋✋8086分段存储非常重要，贯穿全书</p>
<p><strong>2.主存分段与段寄存器的使用</strong></p>
<p>分段结构优势：</p>
<p>①代码、数据量不大 → 使其处于同一段内（64KB范围内）→ 可减少指令长度、提高运行速度。</p>
<p>②内存分段为程序的浮动分配创造了条件。</p>
<p>③各个分段之间可以重叠。</p>
<p>下面结合例题说明</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/eg1.png" style="zoom:75%;"></p>
<p>第一问，CS与IP配合做PC的功能，即：任意时刻CPU将CS:IP指向的内容当作指令执行。<strong>FFFF0H单元中的指令是8086开机执行的第一条指令。</strong>其余略。</p>
<p>第二问，“由该物理地址决定的逻辑地址是什么？”，这句话就让你求CS和IP（段地址+偏移量），在JMP的前一个指令执行完成后，逻辑地址加载到CS和IP中，例如选择逻辑地址为2000H:0100H，则JMP执行后，CS=2000H,IP=0100H。<strong>JMP指令执行前后CS发生改变，故该程序实现了段间转移。</strong>一般来说，大约有0x1000(4096)对不同的CS:IP地址组合能指向同一个内存地址。</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/fdjg.png" style="zoom:50%;"></p>
<p>显示缓冲区就是个例子</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/xsp.png" style="zoom:67%;"></p>
<p>老师上课时候提到了JMP指令，并且拓展延申，这里就直接学了（以后也得学）：</p>
<h4 id="拓展：转移指令-王爽汇编第9章"><a href="#拓展：转移指令-王爽汇编第9章" class="headerlink" title="拓展：转移指令(王爽汇编第9章)"></a>拓展：转移指令(王爽汇编第9章)</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/jmp0.png" style="zoom:70%;"></p>
<p>转移指令是：修改CS和IP的指令，也可以说是控制CPU执行内存中某处代码的指令。</p>
<h5 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h5><p>取得标号的偏移地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start:mov ax,offset start ;相当于mov ax,0</span><br><span class="line">    s:mov ax,offset s     ;相当于mov ax,3</span><br></pre></td></tr></table></figure>
<h5 id="依据位移进行转移的jmp-修改IP"><a href="#依据位移进行转移的jmp-修改IP" class="headerlink" title="依据位移进行转移的jmp(修改IP)"></a>依据位移进行转移的jmp(修改IP)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jmp short xxx(段内短转移)8位:-128~127:最多向高地址移动127位，或向低地址移动128位</span><br><span class="line">IP = IP + 8</span><br><span class="line">jmp near ptr xxx(段内近转移)16位:-32768~32767</span><br><span class="line">IP = IP + 16</span><br></pre></td></tr></table></figure>
<p>这两条指令对应的机器指令并没有转移的目的地址，而是相对于当前IP的转移位移。</p>
<h5 id="转移的目的地址在指令中的jmp-修改CS和IP"><a href="#转移的目的地址在指令中的jmp-修改CS和IP" class="headerlink" title="转移的目的地址在指令中的jmp(修改CS和IP)"></a>转移的目的地址在指令中的jmp(修改CS和IP)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmp far ptr xxx(段间转移;远转移)</span><br></pre></td></tr></table></figure>
<h5 id="转移地址在寄存器中的jmp"><a href="#转移地址在寄存器中的jmp" class="headerlink" title="转移地址在寄存器中的jmp"></a>转移地址在寄存器中的jmp</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jmp 16位REG</span><br><span class="line">jmp ax &lt;=====&gt; mov IP,ax</span><br></pre></td></tr></table></figure>
<h5 id="转移地址在内存中的jmp"><a href="#转移地址在内存中的jmp" class="headerlink" title="转移地址在内存中的jmp"></a>转移地址在内存中的jmp</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">jmp word ptr 内存地址单元 (======&gt;段内转移)</span><br><span class="line">#从内存单元地址处存放一个字，是转移的目的偏移地址</span><br><span class="line">jmp dword ptr 内存地址单元(======&gt;段间转移)</span><br><span class="line">#从内存单元地址处存放两个字</span><br><span class="line">#高地址是转移的目的段地址</span><br><span class="line">#低地址是转移的段内偏移地址</span><br><span class="line">#即：CS=内存单元地址+2；IP=内存单元地址</span><br></pre></td></tr></table></figure>
<h5 id="jcxz指令"><a href="#jcxz指令" class="headerlink" title="jcxz指令"></a>jcxz指令</h5><p><strong>J</strong>ump if <strong>CX</strong> equals <strong>Z</strong>ero</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>((cx)==<span class="number">0</span>) jmp <span class="type">short</span> xxx</span><br></pre></td></tr></table></figure>
<h5 id="loop指令"><a href="#loop指令" class="headerlink" title="loop指令"></a>loop指令</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(cx)--;#所以在汇编程序里面一定有一条和inc cx或dec cx相关的指令</span><br><span class="line">if((cx)!=0) jmp short xxx;</span><br></pre></td></tr></table></figure>
<p>在任何模式下，LOOPD指令都使用ECX作为循环计数器；LOOPW都使用CX作为循环计数器。</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/looppic.png" alt></p>
<p>例程1：整数数组求和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">; This program sums an array of words. (SumArray.asm)</span><br><span class="line">.386</span><br><span class="line">.MODEL flat, stdcall</span><br><span class="line">.STACK 4096</span><br><span class="line">ExitProcess PROTO,dwExitCode:DWORD</span><br><span class="line">.data</span><br><span class="line">intarray WORD 100h,200h,300h,400h</span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">     mov  edi,OFFSET intarray	; address of intarray</span><br><span class="line">     mov  ecx,LENGTHOF intarray	; loop counter</span><br><span class="line">     mov  ax,0				  ; zero the accumulator</span><br><span class="line">L1:  add  ax,[edi]			   ; add an integer</span><br><span class="line">     add  edi,TYPE intarray   	; point to next integer</span><br><span class="line">     loop L1				  ;repeat until ECX = 0</span><br><span class="line">     INVOKE ExitProcess,0</span><br><span class="line">main ENDP</span><br><span class="line">END  main</span><br></pre></td></tr></table></figure>
<h5 id="实验8"><a href="#实验8" class="headerlink" title="实验8"></a>实验8</h5><p>分析下面的程序，在运行前仔细思考：这个程序可以正确的返回吗？运行后在思考：为什么是这样的结果？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">assueme cs:codesg</span><br><span class="line">codesg segment</span><br><span class="line">        mov ax,4c00h</span><br><span class="line">        int 21h</span><br><span class="line">start:  mov ax,0</span><br><span class="line">    s:  nop</span><br><span class="line">        nop</span><br><span class="line"></span><br><span class="line">        mov di,offset s</span><br><span class="line">        mov si,offset s2</span><br><span class="line">        mov ax,cs:[si]</span><br><span class="line">        mov cs:[di],ax</span><br><span class="line"></span><br><span class="line">    s0: jmp short s</span><br><span class="line"></span><br><span class="line">    s1: mov ax,0</span><br><span class="line">        int 21h</span><br><span class="line">        mov ax,0</span><br><span class="line"></span><br><span class="line">    s2: jmp short s1</span><br><span class="line">        nop</span><br><span class="line">codesg ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>先来看一下程序的执行流程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> 1.start: mov ax,0</span><br><span class="line"> 2.s:nop; nop标号语句，在运行时在代码段中分配一个字节的空间，</span><br><span class="line"> 3.nop; 这个字节（空间）的值为90h。        </span><br><span class="line">; 操作符 `offset` 的功能是取得标号的偏移地址。</span><br><span class="line"> 4.mov di,offset s ; 将s的偏移地址存到di寄存器中</span><br><span class="line"> 5.mov si,offset s2; 将s2的偏移地址存到si寄存器中</span><br><span class="line"> 6.mov ax,cs:[si];此行是将cs:[si]内存中的机器码存到ax寄存器中，这个机器码是由编译器将s2标号字段中的指令编译而成。</span><br><span class="line"> 7.mov cs:[di],ax;将ax中的s2标号字段的机器码存放到s标号字段中，覆盖掉2个NOP。</span><br><span class="line"></span><br><span class="line"> 8.s0: jmp short s ; 跳转到 s 标号字段处执行代码，首先执行s起始处的EBF6,程序往前跳三条指令，依次执行mov ax,4c00h  int 21h，程序正常结束，退出。</span><br><span class="line"></span><br><span class="line"> 9.s:  jmp short s1 ; 根据我们之前的分析, 指令是用相对偏移来表示的</span><br><span class="line">    ; 因此执行的操作并不是真的跳转到 s1 这个标号, </span><br><span class="line">    ; 而是跳转编译时确定的 该指令到 s1 标号的偏移量。</span><br><span class="line">    ; 所以我们要分析接下来程序的流程的话 , 就必须先编译程序 , </span><br><span class="line">    ; 通过查看这条指令的机器代码，才知道偏移量是多少。</span><br><span class="line">    ; 然后再根据这个偏移量确定程序下一步应该执行哪里的指令。</span><br><span class="line">    ; 根据编译结果,可以发现 , </span><br><span class="line">    ; jmp short s1 在编译后得到的指令是 : EB F6</span><br><span class="line">    ; 由上可知，偏移量是:F6 </span><br><span class="line">    ; 偏移量是由 补码 来表示的</span><br><span class="line">    ; 我们可以算出 F6对应的有符号十进制数为 -10。</span><br><span class="line">    ; 从这里，我们可以知道，这条指令是将 ip 的值加上 -10。</span><br><span class="line">    ; 那么，我们再看看 ip - 10 指向的地址是哪里呢 ? </span><br><span class="line">    ; 由编译结果，我们可以知道，</span><br><span class="line">    ; 它指向的刚好就是 code segment 开始的位置.</span><br><span class="line"></span><br><span class="line"> 10.   mov ax,4c00h</span><br><span class="line"> 11.   int 21h      ;看到这两句，大家就知道，程序是可以正常返回了</span><br></pre></td></tr></table></figure>
<p>注意👋使用debug的u命令时要加参数：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-u 0</span><br></pre></td></tr></table></figure>
<p>否则默认反汇编从start标号处开始。</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/u0.png" alt></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/u.png" alt></p>
<p>红线就是<code>jmp short s1</code>对应的机器码，偏移量是F6，对应有符号10进制数就是-10，所以要找到就是ip-10，指向的地址是codesg。</p>
<h3 id="2-1-4-8086芯片引脚-背-内容很多-具体看书P29-30-31"><a href="#2-1-4-8086芯片引脚-背-内容很多-具体看书P29-30-31" class="headerlink" title="2.1.4 8086芯片引脚(背,内容很多,具体看书P29,30,31)"></a>2.1.4 8086芯片引脚(背,内容很多,具体看书P29,30,31)</h3><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/86yj.png" style="zoom:80%;"></p>
<h4 id="1-两种模式下共用信号"><a href="#1-两种模式下共用信号" class="headerlink" title="(1)两种模式下共用信号"></a>(1)两种模式下共用信号</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/yj1.png" style="zoom:80%;"></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/yj2.png" style="zoom:80%;"></p>
<h4 id="2-仅在最小模式下使用的信号"><a href="#2-仅在最小模式下使用的信号" class="headerlink" title="(2)仅在最小模式下使用的信号"></a>(2)仅在最小模式下使用的信号</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/yj3.png" style="zoom:80%;"></p>
<h4 id="3-仅在最大模式下使用的信号"><a href="#3-仅在最大模式下使用的信号" class="headerlink" title="(3)仅在最大模式下使用的信号"></a>(3)仅在最大模式下使用的信号</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/yj4.png" style="zoom:80%;"></p>
<h3 id="2-1-5-工作时序"><a href="#2-1-5-工作时序" class="headerlink" title="2.1.5 工作时序"></a>2.1.5 工作时序</h3><p>时钟周期：CPU处理动作的最小时间单位，是 CPU 主频的倒数。</p>
<p>计组学过指令周期：取指＋执行用的时间，但是8086取指和执行是<strong>重叠进行</strong>的，所以引出<strong>总线周期</strong>。</p>
<p>✍<strong>总线周期</strong>：CPU通过系统总线进行存储器读写、I/O读写、中断响应所需时间。8086执行程序的过程就是若干个总线周期实现过程,许多操作都要用到系统总线，所以也叫总线操作。</p>
<p>正常情况下8086CPU一个总线周期由4个时钟周期组成，CPU速度高于主存或IO设备时，要在正常的的总线周期中插入等待时间<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex" xmlns="http://www.w3.org/2000/svg" width="4.63ex" height="1.889ex" role="img" focusable="false" viewbox="0 -677 2046.6 834.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mi" transform="translate(716,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g><g data-mml-node="mi" transform="translate(1245,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1590,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g></g></g></g></g></svg></mjx-container>。</p>
<p><strong>必须掌握典型8086/8088时序分析</strong></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/zx.png" style="zoom:80%;"></p>
<p>T1：送地址<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>地址锁存（ALE高电平）<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>要访问主存（IO/<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="2.378ex" height="2.113ex" role="img" focusable="false" viewbox="0 -934 1051 934"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"/></g><g data-mml-node="mo" transform="translate(629,244) translate(-250 0)"><path data-c="AF" d="M69 544V590H430V544H69Z"/></g></g></g></g></g></svg></mjx-container>）<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>读主存（DT/<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.048ex" xmlns="http://www.w3.org/2000/svg" width="1.717ex" height="2.161ex" role="img" focusable="false" viewbox="0 -934 759 955"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(462.8,244) translate(-250 0)"><path data-c="AF" d="M69 544V590H430V544H69Z"/></g></g></g></g></g></svg></mjx-container>）</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.048ex" xmlns="http://www.w3.org/2000/svg" width="1.717ex" height="2.161ex" role="img" focusable="false" viewbox="0 -934 759 955"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(462.8,244) translate(-250 0)"><path data-c="AF" d="M69 544V590H430V544H69Z"/></g></g></g></g></g></svg></mjx-container>：CPU读取数据</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="5.611ex" height="2.262ex" role="img" focusable="false" viewbox="0 -1000 2480 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mi" transform="translate(1592,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"/></g></g><g data-mml-node="mo" transform="translate(0,615)"><svg width="2480" height="237" x="0" y="148" viewbox="620 148 2480 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(7.44,1)"/></svg></g></g></g></g></svg></mjx-container>：低电平有效，传输数据</p>
<p>T3：纯等待，主存从给出的地址选中单元需要时间，判断Ready</p>
<p>Ready：由慢速内存或接口或控制电路产生</p>
<p>T4：读数据，上升沿获取数据</p>
<h3 id="2-1-6-系统总线形成（要会做题）"><a href="#2-1-6-系统总线形成（要会做题）" class="headerlink" title="2.1.6 系统总线形成（要会做题）"></a>2.1.6 系统总线形成（要会做题）</h3><p>使用器件：</p>
<p>1.单向总线</p>
<p>单向三态门驱动器74LS244</p>
<p>2.双向总线</p>
<p>①8286</p>
<p>②8287（带反向）</p>
<p>③74LS245</p>
<p>3.带有三态输出的锁存器</p>
<p>①8282</p>
<p>②8283（带反向）</p>
<p>③74LS373、74LS374</p>
<p>驱动器/缓冲器：增加驱动能力、减轻负载。</p>
<p>💪扇出能力大</p>
<p>👍延时小</p>
<p>驱动的输入与输出是一致的，只有当总电流大于各个支路电流之和才能起到驱动的效果，即：</p>
<script type="math/tex; mode=display">
I_{OH} \geq \sum_{i=1}^{N}I_{Hi}</script><script type="math/tex; mode=display">
I_{OL} \geq \sum_{i=1}^{N}I_{Li}</script><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/8086zx.png" style="zoom:80%;"></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/86zd.png" style="zoom:80%;"></p>
<p><strong>微融合与宏融合</strong></p>
<p>微融合(Micro-Fusion)：将来自同一指令的多个微操作融合为单一的复杂微操作。如果不是被微融合，这些微操作会被多次发送到乱序执行核中。</p>
<p>宏融合(Macro-Fusion)：让处理器在译码的同时，将同类的指令融合为单一的指令，以减少处理的指令数量，让处理器在更短的时间内处理更多的指令。</p>
<h3 id="拓展：虚拟化技术"><a href="#拓展：虚拟化技术" class="headerlink" title="拓展：虚拟化技术"></a>拓展：虚拟化技术</h3><p>👦用虚拟机那么长时间一直都没了解虚拟化技术，好惭愧，<del>先挖个坑，后续打完国赛补上，多少得懂一点。</del></p>
<p>==更新==</p>
<p>已经在写了</p>
<h2 id="第3章前置技能-汇编程序🤛"><a href="#第3章前置技能-汇编程序🤛" class="headerlink" title="第3章前置技能-汇编程序🤛"></a>第3章前置技能-汇编程序🤛</h2><h3 id="源程序从写出到执行"><a href="#源程序从写出到执行" class="headerlink" title="源程序从写出到执行"></a>源程序从写出到执行</h3><h4 id="1-编写"><a href="#1-编写" class="headerlink" title="1.编写"></a>1.编写</h4><p>产生了存储源程序的文本文件</p>
<h4 id="2-编译连接"><a href="#2-编译连接" class="headerlink" title="2.编译连接"></a>2.编译连接</h4><p>编译：对源程序文件中的源程序编译<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>目标文件</p>
<p>连接：目标文件<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>在OS中可以直接运行的可执行文件</p>
<p>可执行文件包含2部分：</p>
<p>①程序（从源程序中的汇编指令翻译过来的机器码）和数据</p>
<p>②相关描述信息（eg：程序占了多大内存空间等等）</p>
<h4 id="3-执行可执行文件中的程序"><a href="#3-执行可执行文件中的程序" class="headerlink" title="3.执行可执行文件中的程序"></a>3.执行可执行文件中的程序</h4><p>在OS中开始执行，将可执行文件中的机器码和数据加载<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>内存，并进行相关初始化，然后由CPU来执行。</p>
<h3 id="源程序"><a href="#源程序" class="headerlink" title="源程序"></a>源程序</h3><p>以👇这个为例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">assume cs:codesg</span><br><span class="line"></span><br><span class="line">codesg segment</span><br><span class="line">	mov ax,0123H</span><br><span class="line">	mov bx,0456H</span><br><span class="line">	add ax,bx</span><br><span class="line">	add ax,ax</span><br><span class="line">	</span><br><span class="line">	mov ax,4c00H</span><br><span class="line">	int 21H</span><br><span class="line">codesg ends</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h4 id="1-伪指令"><a href="#1-伪指令" class="headerlink" title="1.伪指令"></a>1.伪指令</h4><p>汇编语言包含2种指令：</p>
<p>①汇编指令：有对应机器码的指令，可以被编译为机器指令，<strong>最终被CPU执行</strong></p>
<p>②伪指令：没有对应机器码指令，是被编译器执行的指令</p>
<p>👆的程序出现了3种伪指令：</p>
<p>1.assume</p>
<p>作用：将有特定用途的段和相应的段寄存器关联起来</p>
<p>2.segment-ends</p>
<p>成对使用，segment<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>段的开始，ends<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>段的结束</p>
<p>3.end</p>
<p>汇编语言结束标记，遇见end<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>结束对源程序的编译</p>
<p><strong>注意👋ends与end区分</strong></p>
<h4 id="2-源程序中的“程序”"><a href="#2-源程序中的“程序”" class="headerlink" title="2.源程序中的“程序”"></a>2.源程序中的“程序”</h4><p>程序是源程序中最终由计算机执行、处理的指令或数据。</p>
<h4 id="3-标号"><a href="#3-标号" class="headerlink" title="3.标号"></a>3.标号</h4><p>一个标号指代一个地址，比如codesg在segment前面，作为一个段的名称，<strong>这个段的名称</strong>最终被编译、连接程序处理为一个段的段地址。</p>
<h4 id="4-程序结构"><a href="#4-程序结构" class="headerlink" title="4.程序结构"></a>4.程序结构</h4><p>源程序是由一个一个一个<strong><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="2.652ex" height="0.271ex" role="img" focusable="false" viewbox="0 -120 1172 120"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2026" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z"/></g></g></g></svg></mjx-container>段</strong>组成的</p>
<h4 id="5-程序返回"><a href="#5-程序返回" class="headerlink" title="5.程序返回"></a>5.程序返回</h4><p>我们在DOS(一个单任务操作系统)的基础上讲解。</p>
<p>一个程序P2在可执行文件中必须有个<strong>正在运行的程序P1</strong>，</p>
<p>​    ①将P2从可执行文件中加载进内存后；</p>
<p>​    ②将CPU控制权交给P2，P2才开始运行，此时P1暂停；</p>
<p>​    ③P2运行完，将CPU控制权交给P1，P1继续运行。</p>
<p>所以✍<strong>程序返回：一个程序结束后，将CPU的控制权交还给使得它运行的程序</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov ax,4c00H</span><br><span class="line">int 21H</span><br></pre></td></tr></table></figure>
<p>这两条指令实现的功能就是程序返回，一共占5字节。</p>
<h3 id="实战编写运行汇编语言"><a href="#实战编写运行汇编语言" class="headerlink" title="实战编写运行汇编语言"></a>实战编写运行汇编语言</h3><h4 id="1-实战环境"><a href="#1-实战环境" class="headerlink" title="1.实战环境"></a>1.实战环境</h4><p>ubuntu20.04 DOSBOX</p>
<p>自动挂载虚拟硬盘（搜索引擎有）</p>
<h4 id="2-步骤"><a href="#2-步骤" class="headerlink" title="2.步骤"></a>2.步骤</h4><p>①编辑源程序</p>
<p>在挂载硬盘的文件夹查看文件是否齐全：dir命令；然后在具有MASM，ASM，File的文件夹的终端<code>gedit hello.asm</code>，输入以下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">data segment ;数据段</span><br><span class="line">    string db 'Hello,World!$'</span><br><span class="line">data ends</span><br><span class="line">code segment ;代码段</span><br><span class="line">assume cs:code,ds:data</span><br><span class="line">start:</span><br><span class="line">    mov ax,data ;获取段基址</span><br><span class="line">    mov ds,ax ;将段基址送入寄存器</span><br><span class="line">    mov dx,offset string</span><br><span class="line">    mov ah,9</span><br><span class="line">    int 21h</span><br><span class="line">    mov ah,4ch</span><br><span class="line">    int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>②编译:<code>masm hello.asm</code>+3个回车</p>
<p>③连接:<code>link hello.obj</code>+3个回车</p>
<p>④运行:<code>hello.exe</code></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/asyy.png" alt></p>
<p>DOS中有一个程序叫<code>command.com</code>，就是DOS系统的<code>shell</code>。</p>
<h4 id="3-程序执行过程的跟踪"><a href="#3-程序执行过程的跟踪" class="headerlink" title="3.程序执行过程的跟踪"></a>3.程序执行过程的跟踪</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">debug filename.exe</span><br></pre></td></tr></table></figure>
<p>这里讲解一下exe文件中程序的加载过程</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/exe1.png" alt></p>
<p>🧐🤨SA+10H是怎么来的？</p>
<p>👋✍PSP占256字节，程序开始地址为：SA<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0.02ex" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.09ex" role="img" focusable="false" viewbox="0 -491 778 482"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/></g></g></g></svg></mjx-container>16+256+0<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>(SA+16)<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0.02ex" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.09ex" role="img" focusable="false" viewbox="0 -491 778 482"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/></g></g></g></svg></mjx-container>16+0，16转为10H，就得到了SA+10H</p>
<p>DOSBOX加载1.exe时顺序：</p>
<p>①command加载debug</p>
<p>②debug加载1.exe</p>
<p>返回时顺序：</p>
<p>①1.exe<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>debug</p>
<p>②debug<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g></g></g></svg></mjx-container>command</p>
<p><strong>寄存器组的环境</strong></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/reghj.png" alt></p>
<h4 id="4-汇编基础"><a href="#4-汇编基础" class="headerlink" title="4.汇编基础"></a>4.汇编基础</h4><h5 id="1-操作数"><a href="#1-操作数" class="headerlink" title="(1)操作数"></a>(1)操作数</h5><p><strong>立即操作数(immediate)</strong></p>
<p>imm:8、16或32位立即数</p>
<p>imm8:8位立即数（字节）</p>
<p>imm16:16位立即数（字）eg:short</p>
<p>imm32:32位立即数（双字） eg:int</p>
<p><strong>寄存器操作数</strong></p>
<p>reg：任意的通用寄存器</p>
<p>sreg：16位段寄存器CS、DS、SS、ES、FS、GS</p>
<p>r8：AH、AL、BH、BL、CH、CL、DH、DL</p>
<p>r16：AX、BX、CX、DX、SI、DI、SP、BP</p>
<p>r32：<strong>E</strong>AX、<strong>E</strong>BX、<strong>E</strong>CX、<strong>E</strong>DX、<strong>E</strong>SI、<strong>E</strong>DI、<strong>E</strong>SP、<strong>E</strong>BP</p>
<p><strong>内存操作数</strong></p>
<p>mem：8、16或32位</p>
<p><strong>其他约定</strong></p>
<p>r/m8：8位操作数（8位通用寄存器或内存字节）</p>
<p>r/m16：16位操作数（16位通用寄存器或内存字）</p>
<p>r/m32：32位操作数（32位通用寄存器或内存双字）</p>
<h5 id="2-整数表达式"><a href="#2-整数表达式" class="headerlink" title="(2)整数表达式"></a>(2)整数表达式</h5><h5 id="3-字符、字符串常量"><a href="#3-字符、字符串常量" class="headerlink" title="(3)字符、字符串常量"></a>(3)字符、字符串常量</h5><p>用’ ‘括起来</p>
<h5 id="4-保留字"><a href="#4-保留字" class="headerlink" title="(4)保留字"></a>(4)保留字</h5><p>有特殊含义，只能用于正确的上下文环境中</p>
<p>例如<code>@data</code>，<strong>编译时返回整数常量值</strong></p>
<h5 id="5-标识符"><a href="#5-标识符" class="headerlink" title="(5)标识符"></a>(5)标识符</h5><p>尽量避免用“@”和“_”作为第一个字符，因为它们即用于汇编器，也用于高级语言编译器。</p>
<h5 id="6-定义数据"><a href="#6-定义数据" class="headerlink" title="(6)定义数据"></a>(6)定义数据</h5><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/dysj1.png" alt></p>
<h5 id="7-符号常量"><a href="#7-符号常量" class="headerlink" title="(7)符号常量"></a>(7)符号常量</h5><p>不占用任何实际存储空间</p>
<p>但是下面的例子要懂：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">list1 BYTE 10,20,30,40</span><br><span class="line">ListqSize = ($ - list1)</span><br><span class="line">;结构如下</span><br><span class="line">+--------+</span><br><span class="line">    10    &lt;===1000,list1</span><br><span class="line">    20    &lt;===1001</span><br><span class="line">    30    &lt;===1002</span><br><span class="line">    40    &lt;===1003</span><br><span class="line">    ??    &lt;===1004,$所在 </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list2 WORD 1000h,2000h,3000h,4000h</span><br><span class="line">List2Size = ($ - list2)/2;结果是4</span><br></pre></td></tr></table></figure>
<h5 id="8-例程1——加减法"><a href="#8-例程1——加减法" class="headerlink" title="(8)例程1——加减法"></a>(8)例程1——加减法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">.MODEL small,stdcall</span><br><span class="line">.386</span><br><span class="line">DumpRegs PROTO</span><br><span class="line">.STACK 4096</span><br><span class="line">.data</span><br><span class="line">val1      DWORD 10000h</span><br><span class="line">val2      DWORD 40000h</span><br><span class="line">val3      DWORD 20000h</span><br><span class="line">finalVal  DWORD ?</span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">	mov ax,@data		; data seg address</span><br><span class="line">	mov ds,ax		    ; copy to DS</span><br><span class="line">	mov es,ax		    ; copy to ES</span><br><span class="line">	mov eax,val1		; EAX = 10000h</span><br><span class="line">	add eax,val2		; EAX = 50000h</span><br><span class="line">	sub eax,val3		; EAX = 30000h</span><br><span class="line">	mov finalVal,eax	; store the result</span><br><span class="line">	call DumpRegs		; display registers</span><br><span class="line">	mov ah,4Ch		; exit process</span><br><span class="line">	mov al,0		; return code = 0</span><br><span class="line">	int 21h		; call MS-DOS function</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>
<h3 id="中断"><a href="#中断" class="headerlink" title="中断"></a>中断</h3><p>中断分为内中断和外中断，内中断来源于CPU内部，外中断来源于CPU外部。</p>
<h4 id="如何理解中断"><a href="#如何理解中断" class="headerlink" title="如何理解中断"></a>如何理解中断</h4><p>任何一个通用的CPU，比如8086，都具备这样一种能力：可以在执行完当前正在执行的指令后，检测到从<strong>CPU外部</strong>发送过来的或<strong>内部的</strong>一种<strong>特殊信息</strong>，并且可以立即对所接收到的信息进行处理。</p>
<p>这样特殊的信息我们起个名，叫<strong>中断</strong>。</p>
<p>中断就是：CPU不再接着刚执行完的指令向下执行，而是转去处理这个特殊信息。</p>
<p>举个例子：你作业写到一半，你妈妈叫你吃饭，然后你就放下作业去吃饭，吃完饭后继续写作业，这个就是外中断；你作业写到一半，饿了，自己点了外卖，就是内中断。</p>
<p>8086用中断类型码的数据来标识中断信息的来源，中断信息码是一个字节型数据(byte)，一共可以表示256种中断信息来源，所以我们将<strong>产生中断信息的事件</strong>，即<strong>中断信息的来源</strong>，简称为<strong>中断源</strong>。</p>
<h4 id="内中断（异常、例外、陷阱）"><a href="#内中断（异常、例外、陷阱）" class="headerlink" title="内中断（异常、例外、陷阱）"></a>内中断（异常、例外、陷阱）</h4><p>当 8086CPU 内部有下面的情况发生的时候，将会产生相应的中断信息。</p>
<ul>
<li>除法错误，比如，执行 div 指令产生的除法溢出；==&gt;0</li>
<li>单步执行；==&gt;1</li>
<li>执行 into 指令；==&gt;4</li>
<li>执行 int 指令，格式为 int n，指令中 <strong>n 为字节型立即数</strong>，即为中断类型码。</li>
</ul>
<h4 id="外中断（中断）"><a href="#外中断（中断）" class="headerlink" title="外中断（中断）"></a>外中断（中断）</h4><p>PC系统的接口卡和主板上，装有各种接口芯片，这些<strong>外设接口芯片内部有若干寄存器</strong>，CPU将这些寄存器当作<strong>端口</strong>来访问。</p>
<p>外设的输入通过端口送入相关接口芯片的端口中；CPU向外设的输入也是先送入端口中，再由对应的芯片送入外设。</p>
<p>即：CPU通过端口和外部设备进行联系。</p>
<p>✍一般CPU设有<strong>两个</strong>中断请求输入引脚：<strong>可屏蔽</strong>中断请求输入引脚和<strong>不可屏蔽</strong>中断请求输入引脚。</p>
<h4 id="中断处理过程"><a href="#中断处理过程" class="headerlink" title="中断处理过程"></a>中断处理过程</h4><ol>
<li>中断请求</li>
<li>中断判优</li>
<li>中断响应</li>
<li>中断服务</li>
<li>中断返回</li>
</ol>
<h5 id="1-中断请求"><a href="#1-中断请求" class="headerlink" title="1.中断请求"></a>1.中断请求</h5><p>内中断或外中断，每个中断源都有一个<strong>中断请求触发器</strong>，锁存自己的中断请求信号，并保持到CPU响应这个中断请求后才将其清除。</p>
<p>CPU内部还有一个<strong>中断允许触发器</strong>，置1时允许CPU响应中断称为<strong>开中断</strong>，置0时屏蔽中断，即<strong>不允许中断</strong>，被称为<strong>关中断</strong>。</p>
<h5 id="2-中断判优"><a href="#2-中断判优" class="headerlink" title="2.中断判优"></a>2.中断判优</h5><p>多个中断源同时向CPU提出中断请求时，CPU必须找出<strong>中断优先级最高的中断源</strong>，这个过程叫中断判优，可以采用硬件方法或者软件方法。</p>
<h5 id="3-中断响应"><a href="#3-中断响应" class="headerlink" title="3.中断响应"></a>3.中断响应</h5><p>中断响应时，CPU向中断源发出中断响应信号</p>
<h5 id="4-中断服务"><a href="#4-中断服务" class="headerlink" title="4.中断服务"></a>4.中断服务</h5><p>①保护现场：在中断服务程序的起始部分安排若干条入栈指令，将各寄存器的内容压入堆栈保存。</p>
<p>②开中断：在中断服务程序执行期间允许级别更高的中断请求中断现 行的中断服务程序，实现<strong>中断嵌套。</strong></p>
<p>③中断服务：完成中断源的具体要求。</p>
<p>④恢复现场：通常是将保存在堆栈中的现场信息弹出到原来的寄存器中。</p>
<p>⑤中断返回：返回到原程序的断点处，继续执行原程序。</p>
<h5 id="5-中断返回"><a href="#5-中断返回" class="headerlink" title="5.中断返回"></a>5.中断返回</h5><p>返回到原程序的断点处，恢复硬件现场，继续执行原程序。</p>
<h2 id="3-Intel指令系统与程序设计"><a href="#3-Intel指令系统与程序设计" class="headerlink" title="3 Intel指令系统与程序设计"></a>3 Intel指令系统与程序设计</h2><h3 id="16位寻址方式"><a href="#16位寻址方式" class="headerlink" title="16位寻址方式"></a>16位寻址方式</h3><p>8086中，只有<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="69.136ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 30558 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"/></g><g data-mml-node="mi" transform="translate(429,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(1001,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1390,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">基</text></g><g data-mml-node="mi" transform="translate(2290,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">址</text></g><g data-mml-node="mi" transform="translate(3190,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">寄</text></g><g data-mml-node="mi" transform="translate(4090,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">存</text></g><g data-mml-node="mi" transform="translate(4990,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">器</text></g><g data-mml-node="mo" transform="translate(5890,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(6279,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(6723.7,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mi" transform="translate(7192.7,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(7537.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(7926.7,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">源</text></g><g data-mml-node="mi" transform="translate(8826.7,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">地</text></g><g data-mml-node="mi" transform="translate(9726.7,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">址</text></g><g data-mml-node="mi" transform="translate(10626.7,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">寄</text></g><g data-mml-node="mi" transform="translate(11526.7,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">存</text></g><g data-mml-node="mi" transform="translate(12426.7,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">器</text></g><g data-mml-node="mo" transform="translate(13326.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(13715.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(14160.3,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="mi" transform="translate(14680.3,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(15025.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(15414.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">目</text></g><g data-mml-node="mi" transform="translate(16314.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">的</text></g><g data-mml-node="mi" transform="translate(17214.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">地</text></g><g data-mml-node="mi" transform="translate(18114.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">址</text></g><g data-mml-node="mi" transform="translate(19014.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">寄</text></g><g data-mml-node="mi" transform="translate(19914.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">存</text></g><g data-mml-node="mi" transform="translate(20814.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">器</text></g><g data-mml-node="mo" transform="translate(21714.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(22103.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(22548,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"/></g><g data-mml-node="mi" transform="translate(22977,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/></g><g data-mml-node="mo" transform="translate(23480,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(23869,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">基</text></g><g data-mml-node="mi" transform="translate(24769,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">址</text></g><g data-mml-node="mi" transform="translate(25669,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">指</text></g><g data-mml-node="mi" transform="translate(26569,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">针</text></g><g data-mml-node="mi" transform="translate(27469,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">寄</text></g><g data-mml-node="mi" transform="translate(28369,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">存</text></g><g data-mml-node="mi" transform="translate(29269,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">器</text></g><g data-mml-node="mo" transform="translate(30169,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>这四个寄存器可以用在”[…]”中来进行内存单元的寻址。</p>
<p>这4个寄存器可单独行动，或以4种组合出现：</p>
<p><code>①bx+si(+idata)</code></p>
<p><code>②bx+di(+idata)</code></p>
<p><code>③bp+si(+idata)</code></p>
<p><code>④bp+di(+idata)</code></p>
<p>西电计科微原讲的寻址方式如下：</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/xz.png" alt></p>
<h3 id="数据传送指令"><a href="#数据传送指令" class="headerlink" title="数据传送指令"></a>数据传送指令</h3><h4 id="1-MOV"><a href="#1-MOV" class="headerlink" title="1.MOV"></a>1.MOV</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mov destination,source</span><br></pre></td></tr></table></figure>
<p>✍注意事项</p>
<p>两个操作数的<strong>尺寸</strong>必须一致。</p>
<p>两个操作数<strong>不能同时为内存操作数</strong>。</p>
<p>目的操作数<strong>不能是CS，EIP和IP</strong>。</p>
<p><strong>立即数</strong>不能直接送至<strong>段寄存器</strong>。</p>
<h4 id="2-MOVZX"><a href="#2-MOVZX" class="headerlink" title="2.MOVZX"></a>2.MOVZX</h4><p>整数的零/符号拓展：</p>
<p><strong>mov</strong>e with <strong>z</strong>ero-e<strong>x</strong>tened</p>
<p><strong>mov</strong>e with <strong>s</strong>igh-e<strong>x</strong>tened</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">movzx r32,r/m8</span><br><span class="line">movzx r32,r/m16</span><br><span class="line">movzx r16,r/m8</span><br><span class="line">movsx r32,r/m8</span><br><span class="line">movsx r32,r/m16</span><br><span class="line">movsx r16,r/m8</span><br></pre></td></tr></table></figure>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/movzx.png" alt></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/movsx.png" alt></p>
<h4 id="3-XCHG指令"><a href="#3-XCHG指令" class="headerlink" title="3.XCHG指令"></a>3.XCHG指令</h4><p>e<strong>xch</strong>an<strong>g</strong>e data——交换两个操作数内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">格式</span><br><span class="line">xchg reg,reg</span><br><span class="line">xchg reg,mem</span><br><span class="line">xchg mem,reg</span><br></pre></td></tr></table></figure>
<p>交换两个内存操作数：用寄存器，MOV和XCHG结合使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov ax,val1</span><br><span class="line">xchg ax,val2</span><br><span class="line">mov val1,ax</span><br></pre></td></tr></table></figure>
<h4 id="4-直接偏移操作数-直接寻址"><a href="#4-直接偏移操作数-直接寻址" class="headerlink" title="4.直接偏移操作数(直接寻址)"></a>4.直接偏移操作数(直接寻址)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">arrayB BYTE 10h,20h,30h,40h,50h</span><br><span class="line">.code</span><br><span class="line">mov ax,@data</span><br><span class="line">mov ds,ax			; 16位汇编</span><br><span class="line">mov al,arrayB		; AL=10h</span><br><span class="line">mov al,[arrayB+1]	; AL=20h</span><br><span class="line">mov al,[arrayB+2]	; AL=30h</span><br><span class="line">mov al,[arrayB+20]	; AL=??</span><br></pre></td></tr></table></figure>
<p>👋注意：</p>
<p>MASM并不要求一定要使用方括号。</p>
<p>MASM对有效地址没有内建的范围检查模块。</p>
<h3 id="加法和减法指令"><a href="#加法和减法指令" class="headerlink" title="加法和减法指令"></a>加法和减法指令</h3><h4 id="1-INC和DEC指令"><a href="#1-INC和DEC指令" class="headerlink" title="1.INC和DEC指令"></a>1.INC和DEC指令</h4><p>这两条指令不影响进位标志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">myWord WORD 1000h</span><br><span class="line">.code</span><br><span class="line">inc myWord		; 1001h</span><br><span class="line">mov bx,myWord</span><br><span class="line">dec bx		    ; 1000h</span><br></pre></td></tr></table></figure>
<h4 id="2-ADD指令"><a href="#2-ADD指令" class="headerlink" title="2.ADD指令"></a>2.ADD指令</h4><p>注意<strong>同尺寸</strong>即可，不改变源操作数</p>
<h4 id="3-SUB指令"><a href="#3-SUB指令" class="headerlink" title="3.SUB指令"></a>3.SUB指令</h4><p>不改变源操作数</p>
<p>影响的标志位有：</p>
<p>CF、ZF、SF、OF、AF、PF</p>
<h4 id="4-NEG指令-negate"><a href="#4-NEG指令-negate" class="headerlink" title="4.NEG指令(negate)"></a>4.NEG指令(negate)</h4><p>将操作数按位取反，末位加1，即求补码</p>
<p>eg：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">neg 0D8h</span><br><span class="line">;结果是28h</span><br></pre></td></tr></table></figure>
<p>影响的标志位有：</p>
<p>CF、ZF、SF、OF、AF、PF</p>
<h4 id="5-NOT指令"><a href="#5-NOT指令" class="headerlink" title="5.NOT指令"></a>5.NOT指令</h4><p>将操作数按位取反，即求反码，不影响任何状态标志</p>
<h4 id="例程—实现算数表达式"><a href="#例程—实现算数表达式" class="headerlink" title="例程—实现算数表达式"></a>例程—实现算数表达式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">Rval SDWORD ?</span><br><span class="line">Xval SDWORD 26</span><br><span class="line">Yval SDWORD 30</span><br><span class="line">Zval SDWORD 40</span><br><span class="line">.code</span><br><span class="line">mov eax,Xval</span><br><span class="line">neg eax		; EAX = -26</span><br><span class="line">mov ebx,Yval</span><br><span class="line">sub ebx,Zval	; EBX = -10</span><br><span class="line">add eax,ebx</span><br><span class="line">mov Rval,eax	; -36</span><br></pre></td></tr></table></figure>
<h3 id="和数据相关操作符和伪指令"><a href="#和数据相关操作符和伪指令" class="headerlink" title="和数据相关操作符和伪指令"></a>和数据相关操作符和伪指令</h3><h4 id="1-OFFSET操作符"><a href="#1-OFFSET操作符" class="headerlink" title="1.OFFSET操作符"></a>1.OFFSET操作符</h4><p>是由编译器处理的符号，它的功能是<strong>取得标号的偏移地址。</strong></p>
<h4 id="2-PTR操作符"><a href="#2-PTR操作符" class="headerlink" title="2.PTR操作符"></a>2.PTR操作符</h4><p>用来重载操作数的默认尺寸。</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/ptr.png" alt></p>
<h4 id="3-TYPE操作数"><a href="#3-TYPE操作数" class="headerlink" title="3.TYPE操作数"></a>3.TYPE操作数</h4><p>返回按字节计算的变量的单个元素的大小。</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/type.png" alt></p>
<h4 id="4-LENGTHOF操作符"><a href="#4-LENGTHOF操作符" class="headerlink" title="4.LENGTHOF操作符"></a>4.LENGTHOF操作符</h4><p>计算数组中<strong>元素的个数。</strong></p>
<p>👋与<code>sizeof</code>区分</p>
<p>拓展✍C语言中<code>sizeof</code>详解：</p>
<p><code>sizeof</code>是操作符operator而不是函数，它以<strong>字节形式</strong>给出了<strong>其操作数的存储大小</strong>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i;  </span><br><span class="line"><span class="built_in">sizeof</span>(<span class="type">int</span>); <span class="comment">//值为4  </span></span><br><span class="line"><span class="built_in">sizeof</span>(i); <span class="comment">//值为4，等价于sizeof(int)  </span></span><br><span class="line"><span class="keyword">sizeof</span> i; <span class="comment">//值为4  </span></span><br><span class="line"><span class="built_in">sizeof</span>(<span class="number">2</span>); <span class="comment">//值为4，等价于sizeof(int)，因为2的类型为int  </span></span><br><span class="line"><span class="built_in">sizeof</span>(<span class="number">2</span> + <span class="number">3.14</span>); <span class="comment">//值为8，等价于sizeof(double)，因为此表达式的结果的类型为double </span></span><br></pre></td></tr></table></figure>
<h4 id="5-SIZEOF操作符"><a href="#5-SIZEOF操作符" class="headerlink" title="5.SIZEOF操作符"></a>5.SIZEOF操作符</h4><script type="math/tex; mode=display">
SIZEOF返回值=LENGTHOF返回值\times TYPE返回值</script><p>本质就是存储数据的大小</p>
<h3 id="call和ret指令"><a href="#call和ret指令" class="headerlink" title="call和ret指令"></a>call和ret指令</h3><h4 id="call"><a href="#call" class="headerlink" title="call"></a>call</h4><p>主体思想：（不是朝鲜那个！🤣🤣）</p>
<p>①将call指令的<strong>下一条指令的</strong>CS和IP入栈（段间CS和IP，段内IP）</p>
<p>②操作与call对应的jmp指令</p>
<p>✍要运用push和pop的原理！</p>
<p><strong>根据位移转移的call</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">call 标号</span><br><span class="line">&lt;=======&gt;</span><br><span class="line">push IP</span><br><span class="line">jmp near ptr 标号</span><br></pre></td></tr></table></figure>
<p>检测点10.2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">内存地址        机器码         汇编指令</span><br><span class="line">1000：0         b8 00 00      mov ax, 0</span><br><span class="line">1000：3         e8 01 00      call s</span><br><span class="line">1000：6         40            inc ax</span><br><span class="line">1000：7         58         s: pop ax</span><br></pre></td></tr></table></figure>
<p>1.push IP：</p>
<p>IP计算方式：</p>
<p>①call指令的下一条指令的IP     或者</p>
<p>②call指令的IP是3，call指令占3个字节，3+3=6，就是IP</p>
<p>这两种计算方式都可以</p>
<p>2.jmp near ptr s</p>
<p>将栈的元素弹出，是IP，也就是6，所以ax=6</p>
<p>注意：跳过去不能再跳回来！有同学还加了1，我不说是谁🤡</p>
<p><strong>转移地址在指令中的call</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">call far ptr(段间转移)</span><br><span class="line">&lt;=======&gt;</span><br><span class="line">push CS</span><br><span class="line">push IP</span><br><span class="line">jmp far ptr 标号</span><br></pre></td></tr></table></figure>
<p>检测点：ax值是多少？1010h</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">内存地址       机器码              汇编指令</span><br><span class="line">1000:0        b8 00 00            mov ax, 0</span><br><span class="line">1000:3        9A 09 00 00 10      call far ptr s    ; 1) push cs, push ip; 2) (cs) = 1000h, (ip) = 8</span><br><span class="line">1000:8        40                  inc ax</span><br><span class="line">1000:9        58               s: pop ax            ; (ax) = 8</span><br><span class="line">                                  add ax, ax        ; (ax) = 10h</span><br><span class="line">                                  pop bx            ; (bx) = 1000h</span><br><span class="line">                                  add ax, bx        ; (ax) = 1010h</span><br></pre></td></tr></table></figure>
<p><strong>转移地址在寄存器中的call</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">call 16位reg</span><br><span class="line">&lt;=======&gt;</span><br><span class="line">push IP</span><br><span class="line">jmp 16位 reg</span><br></pre></td></tr></table></figure>
<p>检测点：ax值？0Bh</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">内存地址       机器码              汇编指令</span><br><span class="line">1000:0        b8 06 00            mov ax, 6     ; (ax) = 6 </span><br><span class="line">1000:3        ff d0               call ax       ; 1) push ip ---&gt; ((ss):[(sp)-2]) = 5 ; 2) (ip) = 5</span><br><span class="line">1000:5        40                  inc ax</span><br><span class="line">1000:6                            mov bp, sp    </span><br><span class="line">                                  add ax, [bp]  ; (ax) = (ax) + (ip) = 6 + 5 = 0Bh     </span><br></pre></td></tr></table></figure>
<p><strong>转移地址在内存中的call</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">call word ptr 内存单元地址</span><br><span class="line">&lt;=======&gt;</span><br><span class="line">push IP</span><br><span class="line">jmp word ptr 内存单元地址</span><br></pre></td></tr></table></figure>
<p>例题：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mov sp,10h            ;sp = 10h</span><br><span class="line">mov ax,0123h          ;ax = 0123h</span><br><span class="line">mov ds:[0],ax         ;ds:[0]内存地址内容 =  0123h</span><br><span class="line">call word ptr ds:[0]  ;1.push IP,怎么算IP?--&gt;push原理: ss:[sp-2] = ss:0Eh = call指令的下一条指令的字节</span><br><span class="line">			        ;2.IP = ds:[0] = 0123h</span><br></pre></td></tr></table></figure>
<p>IP = 0123h,sp = 0Eh</p>
<p>检测点：ax值？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">stack segment</span><br><span class="line">    dw 8 dup(0)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">    start:  mov ax, stack</span><br><span class="line">            mov ss, ax</span><br><span class="line">            mov sp, 16</span><br><span class="line">            mov ds, ax</span><br><span class="line">            mov ax, 0</span><br><span class="line">            call word ptr ds:[0Eh]  ; 1) push IP ---&gt; ((ss):[0Eh]) = call指令后的第一个字节的地址;</span><br><span class="line">                                    ; 2) (IP) = ((ds):[0Eh]) = ((ss):[0Eh]) = call指令后的第一个字节的地址. </span><br><span class="line">            inc ax                  ; (ax) = 1</span><br><span class="line">            inc ax                  ; (ax) = 2</span><br><span class="line">            inc ax                  ; (ax) = 3</span><br><span class="line">            mov ax, 4c00h</span><br><span class="line">            int 21h</span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start  </span><br></pre></td></tr></table></figure>
<h4 id="ret"><a href="#ret" class="headerlink" title="ret"></a>ret</h4><p>用栈中的数据修改IP中的内容，实现近转移</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IP = SS:SP</span><br><span class="line">SP = SP+2</span><br></pre></td></tr></table></figure>
<p>相当于</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POP IP</span><br></pre></td></tr></table></figure>
<h4 id="retf"><a href="#retf" class="headerlink" title="retf"></a>retf</h4><p>用栈中的数据修改CS和IP的内容，实现远转移</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IP = SS:SP</span><br><span class="line">SP = SP+2</span><br><span class="line">CS = SS:SP</span><br><span class="line">SP = SP+2</span><br></pre></td></tr></table></figure>
<p>相当于</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">POP IP</span><br><span class="line">POP CS</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">low  |_____________|</span><br><span class="line">|    |_____________|</span><br><span class="line">|    |_____________|</span><br><span class="line">|    |_____________|</span><br><span class="line">|    |_____________|</span><br><span class="line">|    |_____________|</span><br><span class="line">V    |_____CS______|</span><br><span class="line">high |_____IP______|&lt;===SP</span><br></pre></td></tr></table></figure>
<h3 id="乘法与除法指令"><a href="#乘法与除法指令" class="headerlink" title="乘法与除法指令"></a>乘法与除法指令</h3><h4 id="mul：无符号数乘法"><a href="#mul：无符号数乘法" class="headerlink" title="mul：无符号数乘法"></a>mul：无符号数乘法</h4><p>32 位模式下，MUL（无符号数乘法）指令有三种类型：</p>
<ul>
<li>第一种执行 8 位操作数与 AL 寄存器的乘法；</li>
<li>第二种执行 16 位操作数与 AX 寄存器的乘法；</li>
<li>第三种执行 32 位操作数与 EAX 寄存器的乘法。</li>
</ul>
<p>乘数和被乘数的大小必须保持一致，这三种类型都可以使用寄存器和内存操作数，但不能使用立即数。MUL指令不会发生溢出。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">被乘数</th>
<th style="text-align:center">乘数</th>
<th style="text-align:center">乘积</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">AL</td>
<td style="text-align:center">reg/mem8</td>
<td style="text-align:center">AX</td>
</tr>
<tr>
<td style="text-align:center">AX</td>
<td style="text-align:center">reg/mem16</td>
<td style="text-align:center">DX:AX</td>
</tr>
<tr>
<td style="text-align:center">EAX</td>
<td style="text-align:center">reg/mem32</td>
<td style="text-align:center">EDX:EAX</td>
</tr>
</tbody>
</table>
</div>
<p>👋如果 DX或EDX 不等于零，则进位标志位置 1，这就意味着隐含的目的操作数的<strong>低半部分容纳不了整个乘积。</strong></p>
<p>有个很好的理由要求在执行 MUL 后检查进位标志位，即，确认：忽略乘积的高半部分是否安全。</p>
<h4 id="div：无符号数除法"><a href="#div：无符号数除法" class="headerlink" title="div：无符号数除法"></a>div：无符号数除法</h4><p>32 位模式下，DIV（无符号数除法）指令有三种类型：</p>
<ul>
<li>第一种执行 8 位无符号数除法；</li>
<li>第二种执行 16 位无符号数除法；</li>
<li>第三种执行 32 位无符号数除法。</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">被除数</th>
<th style="text-align:center">除数</th>
<th style="text-align:center">商</th>
<th style="text-align:center">余数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">AX</td>
<td style="text-align:center">reg/mem8</td>
<td style="text-align:center">AL</td>
<td style="text-align:center">AH</td>
</tr>
<tr>
<td style="text-align:center">DX:AX</td>
<td style="text-align:center">reg/mem16</td>
<td style="text-align:center">AX</td>
<td style="text-align:center">DX</td>
</tr>
<tr>
<td style="text-align:center">EDX:EAX</td>
<td style="text-align:center">reg/mem32</td>
<td style="text-align:center">EAX</td>
<td style="text-align:center">EDX</td>
</tr>
</tbody>
</table>
</div>
<p>示例：</p>
<p>1.8位无符号除法</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/div1.png" alt></p>
<p>2.16位无符号除法</p>
<p>  DX 包含的是被除数的高位部分，因此在执行 DIV 指令之前，必须将其清零</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/div2.png" alt></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov dx,0    ;清除被除数高16位</span><br><span class="line">mov ax,8003h;被除数的低16位</span><br><span class="line">mov cx,100h ;除数</span><br><span class="line">div cx      ;AX = 0080h, DX = 0003h</span><br></pre></td></tr></table></figure>
<p>3.32位无符号除法</p>
<p>除数为内存操作数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">dividend QWORD 0000000800300020h</span><br><span class="line">divisor DWORD 00000100h</span><br><span class="line">.code</span><br><span class="line">mov edx, DWORD PTR dividend + 4  ; 高双字</span><br><span class="line">mov eax, DWORD PTR dividend      ; 低双字</span><br><span class="line">div divisor                      ; EAX = 08003000h, EDX = 00000020h</span><br></pre></td></tr></table></figure>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/div32.png" alt></p>
<h4 id="IMUL指令：有符号乘法"><a href="#IMUL指令：有符号乘法" class="headerlink" title="IMUL指令：有符号乘法"></a>IMUL指令：有符号乘法</h4><p>如果积的高半部分不是低半部分的符号扩展，则设置CF和OF。</p>
<h4 id="IDIV指令：有符号除法"><a href="#IDIV指令：有符号除法" class="headerlink" title="IDIV指令：有符号除法"></a>IDIV指令：有符号除法</h4><p>当执行8位数的除法指令之前，必须将被除数符号扩展到AH中(可用CBW指令)。</p>
<p>16位除法要求AX被符号扩展到DX中。</p>
<p>32位除法要求将EAX符号扩展到EDX中。</p>
<h3 id="布尔和比较指令"><a href="#布尔和比较指令" class="headerlink" title="布尔和比较指令"></a>布尔和比较指令</h3><h4 id="AND指令（按位与"><a href="#AND指令（按位与" class="headerlink" title="AND指令（按位与"></a>AND指令（按位与</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AND destination,source</span><br></pre></td></tr></table></figure>
<p>结果保存在<strong>目的操作数</strong>中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AND reg,reg</span><br><span class="line">AND reg,mem</span><br><span class="line">AND mem,reg</span><br><span class="line">AND reg,imm</span><br><span class="line">AND mem,imm</span><br></pre></td></tr></table></figure>
<p>总是清除<strong>OF</strong>和<strong>CF</strong></p>
<p>用途举例：</p>
<p>1.特定位清0</p>
<p>2.小写转大写</p>
<p>例程：字符转换为大写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">array BYTE 50 DUP(?)</span><br><span class="line">.code</span><br><span class="line">  mov  ecx,LENGTHOF array</span><br><span class="line">  mov  esi,OFFSET array</span><br><span class="line">L1:</span><br><span class="line">  and  byte ptr [esi],11011111b</span><br><span class="line">  inc  esi</span><br><span class="line">  loop L1</span><br></pre></td></tr></table></figure>
<h4 id="OR指令（按位或"><a href="#OR指令（按位或" class="headerlink" title="OR指令（按位或"></a>OR指令（按位或</h4><p>格式与AND相同</p>
<p>用途：</p>
<p>1.特定位置1</p>
<p>2.大写转小写</p>
<p>要掌握：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mov dl,5  ;二进制数</span><br><span class="line">or dl,30h ;转换为ASCII码</span><br><span class="line">;也可以写为</span><br><span class="line">add dl,30h 或者</span><br><span class="line">add dl,'0'</span><br></pre></td></tr></table></figure>
<h4 id="XOR指令（按位异或"><a href="#XOR指令（按位异或" class="headerlink" title="XOR指令（按位异或"></a>XOR指令（按位异或</h4><p>用途：</p>
<p>1.对某些位取反，同时不影响其它位</p>
<p>2.判断16位或32位的奇偶性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov ax , 64C1h</span><br><span class="line">xor ah,al</span><br></pre></td></tr></table></figure>
<p>3.简单数据加密</p>
<script type="math/tex; mode=display">
X = (X \oplus Y) \oplus Y</script><h4 id="TEST指令"><a href="#TEST指令" class="headerlink" title="TEST指令"></a>TEST指令</h4><p>两操作数按位与，根据结果设置标志位但不回送结果，即不修改目的操作数。</p>
<p>用途：测试操作数某一位是0还是1</p>
<p>例子：想指定AL中第0位和第三位是否同时为0</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test AL,00001001b</span><br></pre></td></tr></table></figure>
<p>清除 OF、CF；修改 SF、ZF、PF。</p>
<h4 id="CMP指令"><a href="#CMP指令" class="headerlink" title="CMP指令"></a>CMP指令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmp destination,source</span><br></pre></td></tr></table></figure>
<p>无符号数比较：</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/wcmp.png" alt></p>
<p>有符号数的比较：</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/ycmp.png" alt></p>
<h4 id="设置和清除单个CPU标志"><a href="#设置和清除单个CPU标志" class="headerlink" title="设置和清除单个CPU标志"></a>设置和清除单个CPU标志</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">stc	;设置进位标志</span><br><span class="line">clc	;清除进位标志</span><br><span class="line"></span><br><span class="line">and al,0	;设置零标志</span><br><span class="line">or  al,1	;清除零标志</span><br><span class="line"></span><br><span class="line">or  al,80h  ;设置符号标志</span><br><span class="line">and al,7Fh  ;清除符号标志</span><br><span class="line"></span><br><span class="line">mov al,7Fh  ;AL=+127</span><br><span class="line">inc al	  ;AL=80h(即-128),OF=1</span><br><span class="line">or  eax,0	  ;清除溢出标志</span><br></pre></td></tr></table></figure>
<h3 id="条件跳转"><a href="#条件跳转" class="headerlink" title="条件跳转"></a>条件跳转</h3><p>按照以下条件可将跳转指令分成4组：</p>
<p>·根据特定的标志值。</p>
<p>·根据操作数之间是否相等，或根据(E)CX的值。</p>
<p>·根据无符号操作数的比较结果。A: Above B: Below</p>
<p>·根据有符号操作数的比较结果。G: Greater L: Less</p>
<p>例程1：比较 V1、V2、V3 三个无符号变量的值，将最小值送入AX寄存器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">V1 WORD 23</span><br><span class="line">V2 WORD 0</span><br><span class="line">V3 WORD -1</span><br><span class="line">.code</span><br><span class="line">    mov ax,V1	;assume V1 is smallest</span><br><span class="line">    cmp ax,V2	;if ax &lt;= V2 then</span><br><span class="line">    jbe L1		;  jump to L1</span><br><span class="line">    mov ax,V2	;else move V2 to ax</span><br><span class="line">L1: cmp ax,V3	;if ax &lt;= V3 then</span><br><span class="line">    jbe L2		;  jump to L2</span><br><span class="line">    mov ax,V3	;else move V3 to ax</span><br><span class="line">L2: ……</span><br></pre></td></tr></table></figure>
<h3 id="移位和循环移位指令"><a href="#移位和循环移位指令" class="headerlink" title="移位和循环移位指令"></a>移位和循环移位指令</h3><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/ywzl.png" style="zoom:80%;"></p>
<h4 id="逻辑移位和算数移位"><a href="#逻辑移位和算数移位" class="headerlink" title="逻辑移位和算数移位"></a>逻辑移位和算数移位</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/ywxh1.png" alt></p>
<h4 id="SHL-R：逻辑左-右移"><a href="#SHL-R：逻辑左-右移" class="headerlink" title="SHL/R：逻辑左/右移"></a>SHL/R：逻辑左/右移</h4><p>快速乘/除法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov dl,5</span><br><span class="line">shl dl,1	;5*2 = 10</span><br><span class="line">mov dl,10</span><br><span class="line">shl dl,2	;10*4 = 40</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov dl,32</span><br><span class="line">shr dl,1			;32/2 = 16</span><br><span class="line">mov dl,01000000b		;AL = 64</span><br><span class="line">shr dl,3			;64/8 = 8</span><br></pre></td></tr></table></figure>
<h4 id="SAL-R：算数左-右移"><a href="#SAL-R：算数左-右移" class="headerlink" title="SAL/R：算数左/右移"></a>SAL/R：算数左/右移</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov al,0F0h		; AL = 11110000b (-16)</span><br><span class="line">sar al,1		; AL = 11111000b (-8)</span><br><span class="line">					; CF = 0</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov dl,-128		; DL = 10000000b</span><br><span class="line">sar dl,3		; DL = 11110000b</span><br></pre></td></tr></table></figure>
<h4 id="ROL：循环左移"><a href="#ROL：循环左移" class="headerlink" title="ROL：循环左移"></a>ROL：循环左移</h4><p>特点：不丢失任何数据位</p>
<p>例：将一个字节的低4位和高4位交换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov al,26h</span><br><span class="line">rol al,4</span><br></pre></td></tr></table></figure>
<h4 id="ROR：循环右移"><a href="#ROR：循环右移" class="headerlink" title="ROR：循环右移"></a>ROR：循环右移</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov al,01h	;00000001</span><br><span class="line">ror al,1		;10000000, CF=1</span><br><span class="line">ror al,1		;01000000, CF=0</span><br></pre></td></tr></table></figure>
<h4 id="RCL-R（带进位的循环左-右移"><a href="#RCL-R（带进位的循环左-右移" class="headerlink" title="RCL/R（带进位的循环左/右移"></a>RCL/R（带进位的循环左/右移</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/xhyw.png" alt></p>
<p>例子：从进位标志中恢复一个位</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">testval BYTE 01101010b</span><br><span class="line">.code</span><br><span class="line">shr testval,1		;shift LSB into Carry flag</span><br><span class="line">jc  quit		;exit if Carry flag set</span><br><span class="line">rcl testval,1		;else restore the number</span><br></pre></td></tr></table></figure>
<h4 id="SHLD-SHRD"><a href="#SHLD-SHRD" class="headerlink" title="SHLD/SHRD"></a>SHLD/SHRD</h4><p>要求至少是<strong>I386</strong>处理器</p>
<p>SHLD：双精度左移</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHLD 目的操作数,源操作数,移位位数</span><br></pre></td></tr></table></figure>
<p>SHRD：双精度右移</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHRD 目的操作数,源操作数,移位位数</span><br></pre></td></tr></table></figure>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/SHLRD.png" alt></p>
<h3 id="间接寻址"><a href="#间接寻址" class="headerlink" title="间接寻址"></a>间接寻址</h3><h4 id="1-间接操作数"><a href="#1-间接操作数" class="headerlink" title="1.间接操作数"></a>1.间接操作数</h4><p>可以是任何用方括号括起来的32位通用寄存器（EAX，EBX，ECX，EDX，ESI，EDI，EBP、ESP）。</p>
<p><strong>实地址模式</strong>下只能用SI，DI，BX，BP。通常<strong>尽量避免使用BP</strong>（BP常用来寻址堆栈而不是数据段）。</p>
<p>✍实模式(real model):</p>
<p>又叫实地址模式(real address mode)，是所有x86兼容CPU的一种操作模式，采用和8086相同的16位段和偏移量，最大寻址空间1MB，是CPU启动时的模式，相当于一个速度超快的8086。</p>
<p>在这个实模式下，可以运行DOS操作系统。<strong>著名的MSDOS是微软的DOS操作系统，微软用它赚了第一桶金。</strong></p>
<p>用户写的代码中CS与IP寄存器组合成的地址即为实际的物理内存地址。这种方式非常的<strong>不安全</strong>，并且不方便实现多任务系统。在设计80286的时候要解决的主要就是这个问题。</p>
<p>✍保护模式(protected mode):</p>
<p>又叫保护地址模式(protected address mode)，从80286开始，有了存储器分段管理部件，支持操作系统实现一种新的存储器管理模式，保护模式。</p>
<p>在80286中，段式访存得到的改进，原来段寄存器+IP得到的地址不在是实际的物理地址，而是要经过一个转换层转换才变成一个物理地址。CS里面的内存不再是20位物理地址的高16位，而变成了段描述符表中的索引。</p>
<h4 id="2-数组"><a href="#2-数组" class="headerlink" title="2.数组"></a>2.数组</h4><p>例程1：32位三个双字相加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">arrayD DWORD 10000h,20000h,30000h</span><br><span class="line">.code</span><br><span class="line">mov esi,OFFSET arrayD</span><br><span class="line">mov eax,[esi]</span><br><span class="line">add esi,4</span><br><span class="line">add eax,[esi]</span><br><span class="line">add esi,4</span><br><span class="line">add eax,[esi]</span><br></pre></td></tr></table></figure>
<p>例程2：16位三个双字相加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">arrayW WORD 1000h,2000h,3000h</span><br><span class="line">.code</span><br><span class="line">mov ax,@data</span><br><span class="line">mov ds,ax</span><br><span class="line">mov si,OFFSET arrayW</span><br><span class="line">mov ax,[si]</span><br><span class="line">add si,2</span><br><span class="line">add ax,[si]</span><br><span class="line">add si,2</span><br><span class="line">add ax,[si]</span><br></pre></td></tr></table></figure>
<h4 id="3-变址操作数（寄存器相对寻址）"><a href="#3-变址操作数（寄存器相对寻址）" class="headerlink" title="3.变址操作数（寄存器相对寻址）"></a>3.变址操作数（寄存器相对寻址）</h4><p>例程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">arrayB BYTE 10h,20h,30h</span><br><span class="line">.code</span><br><span class="line">mov esi,0</span><br><span class="line">mov al,[arrayB + esi]	; AL = 10h</span><br><span class="line">mov al,arrayB[esi]		; 同上，另一种格式</span><br><span class="line">mov esi,OFFSET arrayB</span><br><span class="line">mov al,[esi]			; AL = 10h</span><br><span class="line">mov al,[esi+1]		; AL = 20h</span><br><span class="line">mov al,[esi+2]		; AL = 30h</span><br></pre></td></tr></table></figure>
<h3 id="过程论"><a href="#过程论" class="headerlink" title="过程论"></a>过程论</h3><p>随着程序规模的增长，到了需要对程序进行逻辑划分并将其分为过程的时候了。</p>
<h4 id="一-与外部库链接"><a href="#一-与外部库链接" class="headerlink" title="一.与外部库链接"></a>一.与外部库链接</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/wbklj.png" alt></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/ljkgz.png" alt></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/ljddll.png" alt></p>
<h4 id="二-堆栈操作"><a href="#二-堆栈操作" class="headerlink" title="二.堆栈操作"></a>二.堆栈操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUSH   POP</span><br></pre></td></tr></table></figure>
<p>以32位为例</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/push.png" alt></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/push1.png" alt></p>
<p>堆栈用途：</p>
<p>📒过程内的局部变量在堆栈上创建，过程结束时，这些变量被丢弃。</p>
<p>📓CALL指令执行时，CPU用堆栈保存当前过程的返回地址。</p>
<p>📚调用过程时，可通过堆栈传递参数。</p>
<p>📖寄存器在用作多种用途的时候，堆栈可方便地作为其临时保存区域；当寄存器使用完毕后，可从堆栈中恢复其原始值。</p>
<h4 id="三-过程定义与使用"><a href="#三-过程定义与使用" class="headerlink" title="三.过程定义与使用"></a>三.过程定义与使用</h4><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.767ex" xmlns="http://www.w3.org/2000/svg" width="12.462ex" height="2.362ex" role="img" focusable="false" viewbox="0 -705 5508 1044"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munder"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/></g><g data-mml-node="mi" transform="translate(751,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mi" transform="translate(1510,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mi" transform="translate(2273,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/></g></g><g data-mml-node="mo" transform="translate(0,-487)"><svg width="3033" height="237" x="0" y="148" viewbox="758.2 148 3033 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(9.099,1)"/></svg></g></g><g data-mml-node="mi" transform="translate(3033,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3499,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="mi" transform="translate(4019,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(4591,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(5042,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g></g></g></svg></mjx-container></p>
<h5 id="1-PROC伪指令"><a href="#1-PROC伪指令" class="headerlink" title="1.PROC伪指令"></a>1.PROC伪指令</h5><p>①过程定义</p>
<p>过程用PROC和ENDP伪指令来声明，另外还必须给过程起一个名字（一个有效的标识符，下面的就有main和sample）。</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/proc.png" alt></p>
<p>②例程：三个整数之和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SumOf PROC</span><br><span class="line">	add eax,ebx</span><br><span class="line">	add eax,ecx</span><br><span class="line">	ret</span><br><span class="line">SumOf ENDP</span><br></pre></td></tr></table></figure>
<p>③为过程添加文档</p>
<p>几点建议：</p>
<ul>
<li>[ ] 过程完成的所有任务的描述。</li>
<li>[ ] 输入参数的清单及使用方法。</li>
<li>[ ] 过程返回值的描述。</li>
<li>[ ] 列出特殊要求，即调用过程之前必须满足的条件。</li>
</ul>
<p>举例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">;--------------------------------------------------------</span><br><span class="line">SumOf PROC</span><br><span class="line">;</span><br><span class="line">; Calculates and returns the sum of three 32-bit integers.</span><br><span class="line">; Receives: EAX, EBX, ECX, the three integers. May be</span><br><span class="line">;           signed or unsigned.</span><br><span class="line">; Returns:  EAX = sum, and the status flags (Carry,</span><br><span class="line">;           Overflow, etc.) are changed.</span><br><span class="line">;--------------------------------------------------------</span><br><span class="line">		add eax,ebx</span><br><span class="line">		add eax,ecx</span><br><span class="line">		ret</span><br><span class="line">SumOf ENDP</span><br></pre></td></tr></table></figure>
<h5 id="2-CALL和RET指令"><a href="#2-CALL和RET指令" class="headerlink" title="2.CALL和RET指令"></a>2.CALL和RET指令</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">main PROC</span><br><span class="line">	.</span><br><span class="line">	call MySub;00000020</span><br><span class="line">	mov eax,ebx;00000025</span><br><span class="line">	.</span><br><span class="line">main ENDP</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MySub PROC</span><br><span class="line">	mov eax,edx;00000040</span><br><span class="line">	.</span><br><span class="line">	.</span><br><span class="line">	ret</span><br><span class="line">MySub ENDP</span><br></pre></td></tr></table></figure>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/cr.png" alt></p>
<p>向过程传递寄存器参数例程：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">theSum DWORD ?</span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">	mov  eax,10000h	  ; argument</span><br><span class="line">	mov  ebx,20000h	  ; argument</span><br><span class="line">	mov  ecx,30000h	  ; argument</span><br><span class="line">	call SumOf		  ; EAX=(EAX+EBX+ECX)</span><br><span class="line">	mov  theSum,eax	  ; save the sum</span><br></pre></td></tr></table></figure>
<p>例程—对整数数组求和并调用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">;-----------------------------------------------------</span><br><span class="line">ArraySum PROC</span><br><span class="line">;</span><br><span class="line">; Calculates the sum of an array of 32-bit integers.</span><br><span class="line">; Receives: ESI points to the array, ECX = array size</span><br><span class="line">; Returns:  EAX = sum of the array elements</span><br><span class="line">;-----------------------------------------------------</span><br><span class="line">	push  esi		; save ESI, ECX</span><br><span class="line">	push  ecx</span><br><span class="line">	mov   eax,0		; set the sum to zero</span><br><span class="line">L1:</span><br><span class="line">	add   eax,[esi]	; add each integer to sum</span><br><span class="line">	add   esi,4		; point to next integer</span><br><span class="line">	loop  L1		; repeat for array size</span><br><span class="line"></span><br><span class="line">	pop   ecx		; restore ECX, ESI</span><br><span class="line">	pop   esi</span><br><span class="line">	ret			; sum is in EAX</span><br><span class="line">ArraySum ENDP</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">array  DWORD 10000h,20000h,30000h,40000h,50000h</span><br><span class="line">theSum DWORD ?</span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">   mov  esi,OFFSET array		; ESI points to array</span><br><span class="line">   mov  ecx,LENGTHOF array		; ECX = array count</span><br><span class="line">   call ArraySum			; calculate the sum</span><br><span class="line">   mov  theSum,eax			; returned in EAX</span><br><span class="line">   ......</span><br></pre></td></tr></table></figure>
<h4 id="四-使用过程进行程序设计"><a href="#四-使用过程进行程序设计" class="headerlink" title="四.使用过程进行程序设计"></a>四.使用过程进行程序设计</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/eg00.png" alt></p>
<h4 id="五-高级过程"><a href="#五-高级过程" class="headerlink" title="五.高级过程"></a>五.高级过程</h4><h5 id="堆栈参数"><a href="#堆栈参数" class="headerlink" title="堆栈参数"></a>堆栈参数</h5><p>需要的参数由调用程序压入堆栈。</p>
<p>·PROTO伪指令</p>
<p>函数声明，为一个已存在的过程创建原型。原型声明了过程的名字和参数列表，允许一个过程在被定义之前就可以在其它地方被调用。</p>
<p>·ADDR运算符</p>
<p>可在使用INVOKE调用过程时传递指针(地址参数)。</p>
<p>·内存模式</p>
<p>①.MODEL伪指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.MODEL 内存模式 [,模式选项]</span><br></pre></td></tr></table></figure>
<p>例：<code>.MODEL flat,stdcall</code>保护模式程序使用平坦内存模式</p>
<p>②STDCALL关键字</p>
<p>指定过程按照从右到左的顺序压入参数。</p>
<p>👋<strong>STDCALL要求过程在RET指令后提供常量操作数。</strong></p>
<h5 id="寄存器参数"><a href="#寄存器参数" class="headerlink" title="寄存器参数"></a>寄存器参数</h5><p>寄存器内容在装入参数前必须保存。</p>
<h5 id="INVOKE指令"><a href="#INVOKE指令" class="headerlink" title="INVOKE指令"></a>INVOKE指令</h5><p>自动在堆栈上压入参数并调用程序。</p>
<p>使用invoke伪指令会帮你完成参数校检和压参操作，直接和高级语言一样直接调用函数即可。</p>
<p>👋<strong>几乎所有高级语言都使用堆栈参数</strong></p>
<h5 id="堆栈框架"><a href="#堆栈框架" class="headerlink" title="堆栈框架"></a>堆栈框架</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LEA reg,mem</span><br></pre></td></tr></table></figure>
<p>计算并装入内存操作数的偏移。</p>
<p><code>LOCAL</code>伪指令在过程中声明一个或多个局部变量。</p>
<h4 id="六-结构与宏"><a href="#六-结构与宏" class="headerlink" title="六.结构与宏"></a>六.结构与宏</h4><h5 id="结构-Structure"><a href="#结构-Structure" class="headerlink" title="结构(Structure)"></a>结构(Structure)</h5><p>结构：<strong>逻辑上相互关联</strong>的一组变量的模板或模式。</p>
<p>结构中单个变量称为域(field)。</p>
<p>域的初始化：</p>
<p>·未定义：使用“?”</p>
<p>·字符串：引号引起的字符初始化字符串域</p>
<p>·整数：整数常量、整数表达式</p>
<p>·数组：用<code>DUP</code>操作符</p>
<h5 id="宏-Macro"><a href="#宏-Macro" class="headerlink" title="宏(Macro)"></a>宏(Macro)</h5><p>命名的汇编语句块。调用宏的时候，汇编语句块的<strong>一份拷贝</strong>被<strong>直接插入</strong>到程序中。</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/macro.png" alt></p>
<h5 id="宏和子程序区别"><a href="#宏和子程序区别" class="headerlink" title="宏和子程序区别"></a>宏和子程序区别</h5><p>①<strong>宏</strong>调用通过<strong>宏指令名</strong>进行的；汇编时，由汇编程序展开，调用多少次就展开多少次，<strong>不能缩短目标程序</strong>。子程序调用是在程序执行期间<strong>执行<code>CALL</code>指令</strong>进行的，子程序的代码<strong>只在目标程序中出现一次。</strong></p>
<p>②<strong>宏</strong>调用时的参数由汇编程序通过<strong>实参替换形参</strong>的方式传递；<strong>子程序</strong>调用时的参数<strong>通过寄存器、堆栈或约定的内存单元</strong>传递。</p>
<p>③<strong>宏</strong>调用是在汇编时完成，<strong>运行无需额外开销</strong>；子程序调用和返回均需时间，且涉及堆栈，<strong>速度慢</strong>。</p>
<h4 id="硬件I-O"><a href="#硬件I-O" class="headerlink" title="硬件I/O"></a>硬件I/O</h4><p>1.内存映射</p>
<p>程序直接向<strong>特定的内存地址</strong>写入数据，数据则<strong>自动</strong>传送至设备。</p>
<p>例如：视频显示。</p>
<p>2.基于端口</p>
<p>要求使用 <code>OUT</code>和 <code>IN</code> 指令向“端口”写入或读取数据。</p>
<p><strong>IN</strong>：从端口输入一个字节、字 或 双字。</p>
<p><strong>OUT</strong>：向端口输出一个字节、字 或 双字。</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/io.png" alt></p>
<h4 id="32-64位处理器拓展指令"><a href="#32-64位处理器拓展指令" class="headerlink" title="32/64位处理器拓展指令"></a>32/64位处理器拓展指令</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/mmx.png" alt></p>
<h2 id="4-总线技术"><a href="#4-总线技术" class="headerlink" title="4.总线技术"></a>4.总线技术</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/zx1.png" alt></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/zx2.png" alt></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/zx3.png" alt></p>
<h3 id="总线驱动和控制"><a href="#总线驱动和控制" class="headerlink" title="总线驱动和控制"></a>总线驱动和控制</h3><h4 id="负载"><a href="#负载" class="headerlink" title="负载"></a>负载</h4><p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/fz1.png" alt></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/fz2.png" alt></p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/zxlt1.png" alt></p>
<h4 id="驱动（重点是板子的设计"><a href="#驱动（重点是板子的设计" class="headerlink" title="驱动（重点是板子的设计"></a>驱动（重点是板子的设计</h4><h5 id="常用芯片"><a href="#常用芯片" class="headerlink" title="常用芯片"></a>常用芯片</h5><p>①单向驱动器（三态输出）</p>
<p>②双向驱动器（三态输出）</p>
<h5 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h5><p>某电路板上驱动电路如图所示。</p>
<p>1）编程：从<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="7.1ex" height="1.67ex" role="img" focusable="false" viewbox="0 -716 3138 738"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mn" transform="translate(750,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"/><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"/></g><g data-mml-node="mi" transform="translate(2250,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g></g></g></svg></mjx-container>端口读100个16位数据写入<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="8.407ex" height="1.595ex" role="img" focusable="false" viewbox="0 -683 3716 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mn" transform="translate(828,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"/><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"/><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1500,0)"/></g><g data-mml-node="mi" transform="translate(2828,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g></g></g></svg></mjx-container>起始的主存空间中。</p>
<p>2）画出：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="8.656ex" height="1.645ex" role="img" focusable="false" viewbox="0 -705 3826 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"/><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(500,0)"/></g><g data-mml-node="mi" transform="translate(1000,0)"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(1681,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mn" transform="translate(2326,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(500,0)"/><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(1000,0)"/></g></g></g></svg></mjx-container>的<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.048ex" xmlns="http://www.w3.org/2000/svg" width="4.731ex" height="1.593ex" role="img" focusable="false" viewbox="0 -683 2091 704"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"/></g><g data-mml-node="mi" transform="translate(1332,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g></g></g></svg></mjx-container>和<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="1.729ex" height="2.256ex" role="img" focusable="false" viewbox="0 -997 764 997"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mi"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(0,612)"><svg width="764" height="237" x="0" y="148" viewbox="191 148 764 237"><path data-c="2013" d="M0 248V285H499V248H0Z" transform="scale(2.292,1)"/></svg></g></g></g></g></svg></mjx-container>的波形变化</p>
<p><img src="/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/ltlt.png" style="zoom:50%;"></p>
<p>解：</p>
<p>1）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	mov ax,0D100H</span><br><span class="line">	mov ds,ax		;初始化段寄存器</span><br><span class="line">	mov bx,0000H	;访问数据时作为指针，bx/si/di与ds搭配</span><br><span class="line">	mov cx,100		;循环次数100次</span><br><span class="line">	mov dx,0A080H	;0-FFFFh之间的值送到DX寄存器，0-FFh直接写常量即可</span><br><span class="line">flag:in ax,dx</span><br><span class="line">	 mov [bx],ax</span><br><span class="line">	 add ax,2		;加2是因为字型数据在8086/8088要2个内存单元</span><br><span class="line">	 loop flag</span><br></pre></td></tr></table></figure>
<p>2）波形的题已经10年没有考过了</p>
<p>对于这个总线对应情况的解答：</p>
<p>CXQ老师：比如你设计了一个基于ISA总线的网卡，插在计算机主板的ISA总线扩展插槽上即可使用。</p>
<p>在你的网卡内部，要对ISA总线过来的信号进行驱动，比如数据线，用74LS245驱动，A边连ISA总线信号（即计算机主板过来的信号），B边连网卡内部电路，则74LS245的方向控制可以用ISA总线上的/MEMR或者/IOR信号。</p>
<p>如果74LS245的B边接ISA总线、A边接网卡内部电路，那么方向控制信号就要用写信号（/MEMW或/IOW）了。</p>
<p>可以记为：<strong>A主板读，A网卡写。</strong></p>
<h2 id="附录1-英文术语"><a href="#附录1-英文术语" class="headerlink" title="附录1 英文术语"></a>附录1 英文术语</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">全称</th>
<th style="text-align:center">缩写</th>
<th style="text-align:center">全文</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">【1】大规模集成电路</td>
<td style="text-align:center">LSI</td>
<td style="text-align:center">Large Scale Integration</td>
</tr>
<tr>
<td style="text-align:center">【2】个人电脑</td>
<td style="text-align:center">PC</td>
<td style="text-align:center">Private Computer</td>
</tr>
<tr>
<td style="text-align:center">【3】输入/输出操作</td>
<td style="text-align:center">I/O</td>
<td style="text-align:center">Input/Output</td>
</tr>
<tr>
<td style="text-align:center">【4】数据总线</td>
<td style="text-align:center">DB</td>
<td style="text-align:center">Data Bus</td>
</tr>
<tr>
<td style="text-align:center">【5】地址总线</td>
<td style="text-align:center">AB</td>
<td style="text-align:center">Address Bus</td>
</tr>
<tr>
<td style="text-align:center">【6】控制总线</td>
<td style="text-align:center">CB</td>
<td style="text-align:center">Control Bus</td>
</tr>
<tr>
<td style="text-align:center">【7】中央处理器</td>
<td style="text-align:center">CPU</td>
<td style="text-align:center">Central Processing Unit</td>
</tr>
<tr>
<td style="text-align:center">【8】微处理器</td>
<td style="text-align:center">MPU</td>
<td style="text-align:center">Microprocessor Unit</td>
</tr>
<tr>
<td style="text-align:center">【9】累加器</td>
<td style="text-align:center">ACC</td>
<td style="text-align:center">Accumulator</td>
</tr>
<tr>
<td style="text-align:center">【10】标志寄存器</td>
<td style="text-align:center">FR</td>
<td style="text-align:center">Flag Registers</td>
</tr>
<tr>
<td style="text-align:center">【11】暂存器</td>
<td style="text-align:center">TMP</td>
<td style="text-align:center">Temporary</td>
</tr>
<tr>
<td style="text-align:center">【12】算术逻辑单元</td>
<td style="text-align:center">ALU</td>
<td style="text-align:center">Arithmetic Logic Unit</td>
</tr>
<tr>
<td style="text-align:center">【13】指令寄存器</td>
<td style="text-align:center">IR</td>
<td style="text-align:center">Instruction Register</td>
</tr>
<tr>
<td style="text-align:center">【14】指令译码器</td>
<td style="text-align:center">ID</td>
<td style="text-align:center">Instruction Decoder</td>
</tr>
<tr>
<td style="text-align:center">【15】操作控制电路</td>
<td style="text-align:center">OC</td>
<td style="text-align:center">Operate Control</td>
</tr>
<tr>
<td style="text-align:center">【16】程序计数器</td>
<td style="text-align:center">PC</td>
<td style="text-align:center">Program Counter</td>
</tr>
<tr>
<td style="text-align:center">【17】堆栈指示器</td>
<td style="text-align:center">SP</td>
<td style="text-align:center">Stack Pointer</td>
</tr>
<tr>
<td style="text-align:center">【18】二进制编码的十进制数</td>
<td style="text-align:center">BCD</td>
<td style="text-align:center">Binary-Coded Decimal</td>
</tr>
<tr>
<td style="text-align:center">【19】总线接口单元</td>
<td style="text-align:center">BIU</td>
<td style="text-align:center">Bus Interface Unit</td>
</tr>
<tr>
<td style="text-align:center">【20】执行单元</td>
<td style="text-align:center">EU</td>
<td style="text-align:center">Execution Unit</td>
</tr>
<tr>
<td style="text-align:center">【21】指令单元</td>
<td style="text-align:center">IU</td>
<td style="text-align:center">Instruction Unit</td>
</tr>
<tr>
<td style="text-align:center">【22】地址单元</td>
<td style="text-align:center">AU</td>
<td style="text-align:center">Address Unit</td>
</tr>
<tr>
<td style="text-align:center">【23】存储器管理部件</td>
<td style="text-align:center">MMU</td>
<td style="text-align:center">Memory Management Unit</td>
</tr>
<tr>
<td style="text-align:center">【24】指令预取单元</td>
<td style="text-align:center">IPU</td>
<td style="text-align:center">Instruction Prefetch Unit</td>
</tr>
<tr>
<td style="text-align:center">【25】指令译码单元</td>
<td style="text-align:center">IDU</td>
<td style="text-align:center">Instruction Decode Unit</td>
</tr>
<tr>
<td style="text-align:center">【26】进位标志</td>
<td style="text-align:center">CF</td>
<td style="text-align:center">Carry Flag</td>
</tr>
<tr>
<td style="text-align:center">【27】奇偶标志</td>
<td style="text-align:center">PF</td>
<td style="text-align:center">Parity Flag</td>
</tr>
<tr>
<td style="text-align:center">【28】辅助进位标志</td>
<td style="text-align:center">AF</td>
<td style="text-align:center">Accessary Carry Flag</td>
</tr>
<tr>
<td style="text-align:center">【29】零标志</td>
<td style="text-align:center">ZF</td>
<td style="text-align:center">Zero Flag</td>
</tr>
<tr>
<td style="text-align:center">【30】符号标志</td>
<td style="text-align:center">SF</td>
<td style="text-align:center">Sign Flag</td>
</tr>
<tr>
<td style="text-align:center">【31】溢出标志</td>
<td style="text-align:center">OF</td>
<td style="text-align:center">Overflow Flag</td>
</tr>
<tr>
<td style="text-align:center">【32】方向标志</td>
<td style="text-align:center">DF</td>
<td style="text-align:center">Direction Flag</td>
</tr>
<tr>
<td style="text-align:center">【33】陷阱标志</td>
<td style="text-align:center">TF</td>
<td style="text-align:center">Trap Flag</td>
</tr>
<tr>
<td style="text-align:center">【34】中断允许标志</td>
<td style="text-align:center">IF</td>
<td style="text-align:center">Interrupt Enable Flag</td>
</tr>
<tr>
<td style="text-align:center">【35】I/O特权级标志</td>
<td style="text-align:center">IOPL</td>
<td style="text-align:center">I/O Priority Level</td>
</tr>
<tr>
<td style="text-align:center">【36】任务嵌套标志</td>
<td style="text-align:center">NT</td>
<td style="text-align:center">Nested Task Flag</td>
</tr>
<tr>
<td style="text-align:center">【37】恢复标志</td>
<td style="text-align:center">RF</td>
<td style="text-align:center">Resume Flag</td>
</tr>
<tr>
<td style="text-align:center">【38】虚拟8086模式</td>
<td style="text-align:center">VM</td>
<td style="text-align:center">Virtual 8086 Mode</td>
</tr>
<tr>
<td style="text-align:center">【39】对准检查标志</td>
<td style="text-align:center">AC</td>
<td style="text-align:center">Alignment Check</td>
</tr>
<tr>
<td style="text-align:center">【40】浮点运算单元</td>
<td style="text-align:center">FPU</td>
<td style="text-align:center">Float Point Unit</td>
</tr>
<tr>
<td style="text-align:center">【41】引脚网络阵列</td>
<td style="text-align:center">PGA</td>
<td style="text-align:center">Pin-Grid Array</td>
</tr>
<tr>
<td style="text-align:center">【42】总线单元 BU</td>
<td style="text-align:center">BU</td>
<td style="text-align:center">Bus Unit</td>
</tr>
<tr>
<td style="text-align:center">【43】寻址方式</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Addressing Mode</td>
</tr>
<tr>
<td style="text-align:center">【44】立即寻址</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Immediate Addressing</td>
</tr>
<tr>
<td style="text-align:center">【45】寄存器寻址</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Register Addressing</td>
</tr>
<tr>
<td style="text-align:center">【46】存储器操作数寻址</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Memory Operator Addressing</td>
</tr>
<tr>
<td style="text-align:center">【47】有效地址（偏移地址）</td>
<td style="text-align:center">EA</td>
<td style="text-align:center">Effective Address</td>
</tr>
<tr>
<td style="text-align:center">【48】直接寻址</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Direct Addressing</td>
</tr>
<tr>
<td style="text-align:center">【49】寄存器间接寻址</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Register Indirect Addressing</td>
</tr>
<tr>
<td style="text-align:center">【50】寄存器相对寻址方式</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Register Relative Addressing</td>
</tr>
<tr>
<td style="text-align:center">【51】基址变址寻址方式</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Based Indexed Addressing</td>
</tr>
<tr>
<td style="text-align:center">【52】相对基址变址寻址</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Relative Based Indexed Addressing</td>
</tr>
<tr>
<td style="text-align:center">【53】比例变址寻址</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Scaled Indexed Addressing</td>
</tr>
<tr>
<td style="text-align:center">【54】基址比例变址寻址</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Based Scaled Indexed Addressing</td>
</tr>
<tr>
<td style="text-align:center">【55】相对基址比例变址寻址</td>
<td style="text-align:center">————————</td>
<td style="text-align:center">Relative Based Scaled Indexed Addressing</td>
</tr>
</tbody>
</table>
</div>
<p>​                                                                                                                                                                                                                                    </p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://nexuslbh.top">NexusLbh</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://nexuslbh.top/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/">http://nexuslbh.top/2022/09/07/%E5%BE%AE%E5%8E%9F%E4%B8%8E%E6%B1%87%E7%BC%96/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://nexuslbh.top" target="_blank">Meta Field</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ComputerSystem/">ComputerSystem</a></div><div class="post_share"><div class="social-share" data-image="https://w.wallhaven.cc/full/gp/wallhaven-gp71rd.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/09/08/QRcode/" title="QRcode"><img class="cover" src="https://w.wallhaven.cc/full/n6/wallhaven-n67wqw.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">QRcode</div></div></a></div><div class="next-post pull-right"><a href="/2022/08/31/Spawn-Failed/" title="Spawn Failed"><img class="cover" src="https://w.wallhaven.cc/full/x6/wallhaven-x68lov.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spawn Failed</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/09/21/JS%E5%90%8C%E6%AD%A5%E5%BC%82%E6%AD%A5/" title="JS同步异步"><img class="cover" src="https://w.wallhaven.cc/full/1p/wallhaven-1p3729.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-21</div><div class="title">JS同步异步</div></div></a></div><div><a href="/2022/12/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/" title="计算机是怎样跑起来的-linux0.11源代码学习"><img class="cover" src="/img/cloud.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-16</div><div class="title">计算机是怎样跑起来的-linux0.11源代码学习</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">NexusLbh</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">55</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/NexusXDlbh"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/NexusXDlbh" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:3321861647@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">1 前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Intel%E5%8D%95%E6%A0%B8%E5%A4%84%E7%90%86%E5%99%A8-8086-16%E4%BD%8D"><span class="toc-number">2.</span> <span class="toc-text">2 Intel单核处理器(8086-16位)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-8086-8088%E5%8A%9F%E8%83%BD%E7%89%B9%E6%80%A7"><span class="toc-number">2.1.</span> <span class="toc-text">2.1.1 8086&#x2F;8088功能特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-8086%E5%8A%9F%E8%83%BD%E7%89%B9%E6%80%A7%EF%BC%88%E4%B8%8E%E4%B8%8A%E9%9D%A2%E5%8C%BA%E5%88%86%EF%BC%8C%E7%AE%97%E6%98%AF%E4%B8%8A%E9%9D%A2%E7%9A%84%E4%B8%80%E4%B8%AA%E5%AD%90%E9%9B%86%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">2.1.2 8086功能特性（与上面区分，算是上面的一个子集）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-8086%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">2.3.</span> <span class="toc-text">2.1.3 8086体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CPU%E5%AF%B9%E5%86%85%E5%AD%98%E8%AF%BB%E5%86%99"><span class="toc-number">2.3.1.</span> <span class="toc-text">CPU对内存读写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AE%E5%A4%84%E7%90%86%E5%99%A8%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.3.2.</span> <span class="toc-text">微处理器执行程序的步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%BB%84%E6%88%901-%E6%80%BB%E7%BA%BF%E6%8E%A5%E5%8F%A3%E5%8D%95%E5%85%83BIU-Bus-Interface-Unit-%E5%8F%96%E6%8C%87%E4%BB%A4"><span class="toc-number">2.3.3.</span> <span class="toc-text">内部组成1-总线接口单元BIU(Bus Interface Unit,取指令)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%BB%84%E6%88%902-%E6%89%A7%E8%A1%8C%E5%8D%95%E5%85%83EU-Execute-Unit-%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4"><span class="toc-number">2.3.4.</span> <span class="toc-text">内部组成2-执行单元EU(Execute Unit,执行指令)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">2.3.5.</span> <span class="toc-text">工作原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8086%E5%AF%84%E5%AD%98%E5%99%A8%E7%BB%93%E6%9E%84"><span class="toc-number">2.3.6.</span> <span class="toc-text">8086寄存器结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8086%E4%B8%BB%E5%AD%98%E5%82%A8%E5%99%A8%E5%92%8CIO%E7%BB%93%E6%9E%84"><span class="toc-number">2.3.7.</span> <span class="toc-text">8086主存储器和IO结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%EF%BC%9A%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A4-%E7%8E%8B%E7%88%BD%E6%B1%87%E7%BC%96%E7%AC%AC9%E7%AB%A0"><span class="toc-number">2.3.8.</span> <span class="toc-text">拓展：转移指令(王爽汇编第9章)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#offset"><span class="toc-number">2.3.8.1.</span> <span class="toc-text">offset</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%9D%E6%8D%AE%E4%BD%8D%E7%A7%BB%E8%BF%9B%E8%A1%8C%E8%BD%AC%E7%A7%BB%E7%9A%84jmp-%E4%BF%AE%E6%94%B9IP"><span class="toc-number">2.3.8.2.</span> <span class="toc-text">依据位移进行转移的jmp(修改IP)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BD%AC%E7%A7%BB%E7%9A%84%E7%9B%AE%E7%9A%84%E5%9C%B0%E5%9D%80%E5%9C%A8%E6%8C%87%E4%BB%A4%E4%B8%AD%E7%9A%84jmp-%E4%BF%AE%E6%94%B9CS%E5%92%8CIP"><span class="toc-number">2.3.8.3.</span> <span class="toc-text">转移的目的地址在指令中的jmp(修改CS和IP)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BD%AC%E7%A7%BB%E5%9C%B0%E5%9D%80%E5%9C%A8%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%AD%E7%9A%84jmp"><span class="toc-number">2.3.8.4.</span> <span class="toc-text">转移地址在寄存器中的jmp</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BD%AC%E7%A7%BB%E5%9C%B0%E5%9D%80%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84jmp"><span class="toc-number">2.3.8.5.</span> <span class="toc-text">转移地址在内存中的jmp</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jcxz%E6%8C%87%E4%BB%A4"><span class="toc-number">2.3.8.6.</span> <span class="toc-text">jcxz指令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#loop%E6%8C%87%E4%BB%A4"><span class="toc-number">2.3.8.7.</span> <span class="toc-text">loop指令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C8"><span class="toc-number">2.3.8.8.</span> <span class="toc-text">实验8</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-8086%E8%8A%AF%E7%89%87%E5%BC%95%E8%84%9A-%E8%83%8C-%E5%86%85%E5%AE%B9%E5%BE%88%E5%A4%9A-%E5%85%B7%E4%BD%93%E7%9C%8B%E4%B9%A6P29-30-31"><span class="toc-number">2.4.</span> <span class="toc-text">2.1.4 8086芯片引脚(背,内容很多,具体看书P29,30,31)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%85%B1%E7%94%A8%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.4.1.</span> <span class="toc-text">(1)两种模式下共用信号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BB%85%E5%9C%A8%E6%9C%80%E5%B0%8F%E6%A8%A1%E5%BC%8F%E4%B8%8B%E4%BD%BF%E7%94%A8%E7%9A%84%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.4.2.</span> <span class="toc-text">(2)仅在最小模式下使用的信号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BB%85%E5%9C%A8%E6%9C%80%E5%A4%A7%E6%A8%A1%E5%BC%8F%E4%B8%8B%E4%BD%BF%E7%94%A8%E7%9A%84%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.4.3.</span> <span class="toc-text">(3)仅在最大模式下使用的信号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-5-%E5%B7%A5%E4%BD%9C%E6%97%B6%E5%BA%8F"><span class="toc-number">2.5.</span> <span class="toc-text">2.1.5 工作时序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-6-%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF%E5%BD%A2%E6%88%90%EF%BC%88%E8%A6%81%E4%BC%9A%E5%81%9A%E9%A2%98%EF%BC%89"><span class="toc-number">2.6.</span> <span class="toc-text">2.1.6 系统总线形成（要会做题）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%EF%BC%9A%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF"><span class="toc-number">2.7.</span> <span class="toc-text">拓展：虚拟化技术</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC3%E7%AB%A0%E5%89%8D%E7%BD%AE%E6%8A%80%E8%83%BD-%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F%F0%9F%A4%9B"><span class="toc-number">3.</span> <span class="toc-text">第3章前置技能-汇编程序🤛</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E7%A8%8B%E5%BA%8F%E4%BB%8E%E5%86%99%E5%87%BA%E5%88%B0%E6%89%A7%E8%A1%8C"><span class="toc-number">3.1.</span> <span class="toc-text">源程序从写出到执行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BC%96%E5%86%99"><span class="toc-number">3.1.1.</span> <span class="toc-text">1.编写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BC%96%E8%AF%91%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.1.2.</span> <span class="toc-text">2.编译连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%89%A7%E8%A1%8C%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.1.3.</span> <span class="toc-text">3.执行可执行文件中的程序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.2.</span> <span class="toc-text">源程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="toc-number">3.2.1.</span> <span class="toc-text">1.伪指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%BA%90%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E2%80%9C%E7%A8%8B%E5%BA%8F%E2%80%9D"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.源程序中的“程序”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%A0%87%E5%8F%B7"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.标号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84"><span class="toc-number">3.2.4.</span> <span class="toc-text">4.程序结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%A8%8B%E5%BA%8F%E8%BF%94%E5%9B%9E"><span class="toc-number">3.2.5.</span> <span class="toc-text">5.程序返回</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E7%BC%96%E5%86%99%E8%BF%90%E8%A1%8C%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80"><span class="toc-number">3.3.</span> <span class="toc-text">实战编写运行汇编语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%9E%E6%88%98%E7%8E%AF%E5%A2%83"><span class="toc-number">3.3.1.</span> <span class="toc-text">1.实战环境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%AD%A5%E9%AA%A4"><span class="toc-number">3.3.2.</span> <span class="toc-text">2.步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E7%9A%84%E8%B7%9F%E8%B8%AA"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.程序执行过程的跟踪</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80"><span class="toc-number">3.3.4.</span> <span class="toc-text">4.汇编基础</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%93%8D%E4%BD%9C%E6%95%B0"><span class="toc-number">3.3.4.1.</span> <span class="toc-text">(1)操作数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%95%B4%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.3.4.2.</span> <span class="toc-text">(2)整数表达式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%AD%97%E7%AC%A6%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F"><span class="toc-number">3.3.4.3.</span> <span class="toc-text">(3)字符、字符串常量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E4%BF%9D%E7%95%99%E5%AD%97"><span class="toc-number">3.3.4.4.</span> <span class="toc-text">(4)保留字</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="toc-number">3.3.4.5.</span> <span class="toc-text">(5)标识符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.4.6.</span> <span class="toc-text">(6)定义数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-%E7%AC%A6%E5%8F%B7%E5%B8%B8%E9%87%8F"><span class="toc-number">3.3.4.7.</span> <span class="toc-text">(7)符号常量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-%E4%BE%8B%E7%A8%8B1%E2%80%94%E2%80%94%E5%8A%A0%E5%87%8F%E6%B3%95"><span class="toc-number">3.3.4.8.</span> <span class="toc-text">(8)例程1——加减法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD"><span class="toc-number">3.4.</span> <span class="toc-text">中断</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E4%B8%AD%E6%96%AD"><span class="toc-number">3.4.1.</span> <span class="toc-text">如何理解中断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E4%B8%AD%E6%96%AD%EF%BC%88%E5%BC%82%E5%B8%B8%E3%80%81%E4%BE%8B%E5%A4%96%E3%80%81%E9%99%B7%E9%98%B1%EF%BC%89"><span class="toc-number">3.4.2.</span> <span class="toc-text">内中断（异常、例外、陷阱）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E4%B8%AD%E6%96%AD%EF%BC%88%E4%B8%AD%E6%96%AD%EF%BC%89"><span class="toc-number">3.4.3.</span> <span class="toc-text">外中断（中断）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86%E8%BF%87%E7%A8%8B"><span class="toc-number">3.4.4.</span> <span class="toc-text">中断处理过程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%B8%AD%E6%96%AD%E8%AF%B7%E6%B1%82"><span class="toc-number">3.4.4.1.</span> <span class="toc-text">1.中断请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%B8%AD%E6%96%AD%E5%88%A4%E4%BC%98"><span class="toc-number">3.4.4.2.</span> <span class="toc-text">2.中断判优</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E4%B8%AD%E6%96%AD%E5%93%8D%E5%BA%94"><span class="toc-number">3.4.4.3.</span> <span class="toc-text">3.中断响应</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E4%B8%AD%E6%96%AD%E6%9C%8D%E5%8A%A1"><span class="toc-number">3.4.4.4.</span> <span class="toc-text">4.中断服务</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E4%B8%AD%E6%96%AD%E8%BF%94%E5%9B%9E"><span class="toc-number">3.4.4.5.</span> <span class="toc-text">5.中断返回</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Intel%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F%E4%B8%8E%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1"><span class="toc-number">4.</span> <span class="toc-text">3 Intel指令系统与程序设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16%E4%BD%8D%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">16位寻址方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4"><span class="toc-number">4.2.</span> <span class="toc-text">数据传送指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-MOV"><span class="toc-number">4.2.1.</span> <span class="toc-text">1.MOV</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-MOVZX"><span class="toc-number">4.2.2.</span> <span class="toc-text">2.MOVZX</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-XCHG%E6%8C%87%E4%BB%A4"><span class="toc-number">4.2.3.</span> <span class="toc-text">3.XCHG指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%9B%B4%E6%8E%A5%E5%81%8F%E7%A7%BB%E6%93%8D%E4%BD%9C%E6%95%B0-%E7%9B%B4%E6%8E%A5%E5%AF%BB%E5%9D%80"><span class="toc-number">4.2.4.</span> <span class="toc-text">4.直接偏移操作数(直接寻址)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E6%B3%95%E5%92%8C%E5%87%8F%E6%B3%95%E6%8C%87%E4%BB%A4"><span class="toc-number">4.3.</span> <span class="toc-text">加法和减法指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-INC%E5%92%8CDEC%E6%8C%87%E4%BB%A4"><span class="toc-number">4.3.1.</span> <span class="toc-text">1.INC和DEC指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-ADD%E6%8C%87%E4%BB%A4"><span class="toc-number">4.3.2.</span> <span class="toc-text">2.ADD指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-SUB%E6%8C%87%E4%BB%A4"><span class="toc-number">4.3.3.</span> <span class="toc-text">3.SUB指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-NEG%E6%8C%87%E4%BB%A4-negate"><span class="toc-number">4.3.4.</span> <span class="toc-text">4.NEG指令(negate)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-NOT%E6%8C%87%E4%BB%A4"><span class="toc-number">4.3.5.</span> <span class="toc-text">5.NOT指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E7%A8%8B%E2%80%94%E5%AE%9E%E7%8E%B0%E7%AE%97%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.3.6.</span> <span class="toc-text">例程—实现算数表达式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%92%8C%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%92%8C%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="toc-number">4.4.</span> <span class="toc-text">和数据相关操作符和伪指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-OFFSET%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.4.1.</span> <span class="toc-text">1.OFFSET操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-PTR%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.4.2.</span> <span class="toc-text">2.PTR操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-TYPE%E6%93%8D%E4%BD%9C%E6%95%B0"><span class="toc-number">4.4.3.</span> <span class="toc-text">3.TYPE操作数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-LENGTHOF%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.4.4.</span> <span class="toc-text">4.LENGTHOF操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-SIZEOF%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.4.5.</span> <span class="toc-text">5.SIZEOF操作符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#call%E5%92%8Cret%E6%8C%87%E4%BB%A4"><span class="toc-number">4.5.</span> <span class="toc-text">call和ret指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#call"><span class="toc-number">4.5.1.</span> <span class="toc-text">call</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ret"><span class="toc-number">4.5.2.</span> <span class="toc-text">ret</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#retf"><span class="toc-number">4.5.3.</span> <span class="toc-text">retf</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%98%E6%B3%95%E4%B8%8E%E9%99%A4%E6%B3%95%E6%8C%87%E4%BB%A4"><span class="toc-number">4.6.</span> <span class="toc-text">乘法与除法指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mul%EF%BC%9A%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E4%B9%98%E6%B3%95"><span class="toc-number">4.6.1.</span> <span class="toc-text">mul：无符号数乘法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#div%EF%BC%9A%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E9%99%A4%E6%B3%95"><span class="toc-number">4.6.2.</span> <span class="toc-text">div：无符号数除法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IMUL%E6%8C%87%E4%BB%A4%EF%BC%9A%E6%9C%89%E7%AC%A6%E5%8F%B7%E4%B9%98%E6%B3%95"><span class="toc-number">4.6.3.</span> <span class="toc-text">IMUL指令：有符号乘法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IDIV%E6%8C%87%E4%BB%A4%EF%BC%9A%E6%9C%89%E7%AC%A6%E5%8F%B7%E9%99%A4%E6%B3%95"><span class="toc-number">4.6.4.</span> <span class="toc-text">IDIV指令：有符号除法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E5%92%8C%E6%AF%94%E8%BE%83%E6%8C%87%E4%BB%A4"><span class="toc-number">4.7.</span> <span class="toc-text">布尔和比较指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AND%E6%8C%87%E4%BB%A4%EF%BC%88%E6%8C%89%E4%BD%8D%E4%B8%8E"><span class="toc-number">4.7.1.</span> <span class="toc-text">AND指令（按位与</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OR%E6%8C%87%E4%BB%A4%EF%BC%88%E6%8C%89%E4%BD%8D%E6%88%96"><span class="toc-number">4.7.2.</span> <span class="toc-text">OR指令（按位或</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XOR%E6%8C%87%E4%BB%A4%EF%BC%88%E6%8C%89%E4%BD%8D%E5%BC%82%E6%88%96"><span class="toc-number">4.7.3.</span> <span class="toc-text">XOR指令（按位异或</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TEST%E6%8C%87%E4%BB%A4"><span class="toc-number">4.7.4.</span> <span class="toc-text">TEST指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CMP%E6%8C%87%E4%BB%A4"><span class="toc-number">4.7.5.</span> <span class="toc-text">CMP指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B8%85%E9%99%A4%E5%8D%95%E4%B8%AACPU%E6%A0%87%E5%BF%97"><span class="toc-number">4.7.6.</span> <span class="toc-text">设置和清除单个CPU标志</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E8%B7%B3%E8%BD%AC"><span class="toc-number">4.8.</span> <span class="toc-text">条件跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E4%BD%8D%E5%92%8C%E5%BE%AA%E7%8E%AF%E7%A7%BB%E4%BD%8D%E6%8C%87%E4%BB%A4"><span class="toc-number">4.9.</span> <span class="toc-text">移位和循环移位指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E7%A7%BB%E4%BD%8D%E5%92%8C%E7%AE%97%E6%95%B0%E7%A7%BB%E4%BD%8D"><span class="toc-number">4.9.1.</span> <span class="toc-text">逻辑移位和算数移位</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SHL-R%EF%BC%9A%E9%80%BB%E8%BE%91%E5%B7%A6-%E5%8F%B3%E7%A7%BB"><span class="toc-number">4.9.2.</span> <span class="toc-text">SHL&#x2F;R：逻辑左&#x2F;右移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAL-R%EF%BC%9A%E7%AE%97%E6%95%B0%E5%B7%A6-%E5%8F%B3%E7%A7%BB"><span class="toc-number">4.9.3.</span> <span class="toc-text">SAL&#x2F;R：算数左&#x2F;右移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ROL%EF%BC%9A%E5%BE%AA%E7%8E%AF%E5%B7%A6%E7%A7%BB"><span class="toc-number">4.9.4.</span> <span class="toc-text">ROL：循环左移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ROR%EF%BC%9A%E5%BE%AA%E7%8E%AF%E5%8F%B3%E7%A7%BB"><span class="toc-number">4.9.5.</span> <span class="toc-text">ROR：循环右移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RCL-R%EF%BC%88%E5%B8%A6%E8%BF%9B%E4%BD%8D%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%B7%A6-%E5%8F%B3%E7%A7%BB"><span class="toc-number">4.9.6.</span> <span class="toc-text">RCL&#x2F;R（带进位的循环左&#x2F;右移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SHLD-SHRD"><span class="toc-number">4.9.7.</span> <span class="toc-text">SHLD&#x2F;SHRD</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%B4%E6%8E%A5%E5%AF%BB%E5%9D%80"><span class="toc-number">4.10.</span> <span class="toc-text">间接寻址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%97%B4%E6%8E%A5%E6%93%8D%E4%BD%9C%E6%95%B0"><span class="toc-number">4.10.1.</span> <span class="toc-text">1.间接操作数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%95%B0%E7%BB%84"><span class="toc-number">4.10.2.</span> <span class="toc-text">2.数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%8F%98%E5%9D%80%E6%93%8D%E4%BD%9C%E6%95%B0%EF%BC%88%E5%AF%84%E5%AD%98%E5%99%A8%E7%9B%B8%E5%AF%B9%E5%AF%BB%E5%9D%80%EF%BC%89"><span class="toc-number">4.10.3.</span> <span class="toc-text">3.变址操作数（寄存器相对寻址）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E7%A8%8B%E8%AE%BA"><span class="toc-number">4.11.</span> <span class="toc-text">过程论</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E4%B8%8E%E5%A4%96%E9%83%A8%E5%BA%93%E9%93%BE%E6%8E%A5"><span class="toc-number">4.11.1.</span> <span class="toc-text">一.与外部库链接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E5%A0%86%E6%A0%88%E6%93%8D%E4%BD%9C"><span class="toc-number">4.11.2.</span> <span class="toc-text">二.堆栈操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E8%BF%87%E7%A8%8B%E5%AE%9A%E4%B9%89%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="toc-number">4.11.3.</span> <span class="toc-text">三.过程定义与使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-PROC%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="toc-number">4.11.3.1.</span> <span class="toc-text">1.PROC伪指令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-CALL%E5%92%8CRET%E6%8C%87%E4%BB%A4"><span class="toc-number">4.11.3.2.</span> <span class="toc-text">2.CALL和RET指令</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B-%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B%E8%BF%9B%E8%A1%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1"><span class="toc-number">4.11.4.</span> <span class="toc-text">四.使用过程进行程序设计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94-%E9%AB%98%E7%BA%A7%E8%BF%87%E7%A8%8B"><span class="toc-number">4.11.5.</span> <span class="toc-text">五.高级过程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A0%86%E6%A0%88%E5%8F%82%E6%95%B0"><span class="toc-number">4.11.5.1.</span> <span class="toc-text">堆栈参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E5%8F%82%E6%95%B0"><span class="toc-number">4.11.5.2.</span> <span class="toc-text">寄存器参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#INVOKE%E6%8C%87%E4%BB%A4"><span class="toc-number">4.11.5.3.</span> <span class="toc-text">INVOKE指令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A0%86%E6%A0%88%E6%A1%86%E6%9E%B6"><span class="toc-number">4.11.5.4.</span> <span class="toc-text">堆栈框架</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AD-%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8F"><span class="toc-number">4.11.6.</span> <span class="toc-text">六.结构与宏</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-Structure"><span class="toc-number">4.11.6.1.</span> <span class="toc-text">结构(Structure)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%8F-Macro"><span class="toc-number">4.11.6.2.</span> <span class="toc-text">宏(Macro)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%8F%E5%92%8C%E5%AD%90%E7%A8%8B%E5%BA%8F%E5%8C%BA%E5%88%AB"><span class="toc-number">4.11.6.3.</span> <span class="toc-text">宏和子程序区别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6I-O"><span class="toc-number">4.11.7.</span> <span class="toc-text">硬件I&#x2F;O</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#32-64%E4%BD%8D%E5%A4%84%E7%90%86%E5%99%A8%E6%8B%93%E5%B1%95%E6%8C%87%E4%BB%A4"><span class="toc-number">4.11.8.</span> <span class="toc-text">32&#x2F;64位处理器拓展指令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%80%BB%E7%BA%BF%E6%8A%80%E6%9C%AF"><span class="toc-number">5.</span> <span class="toc-text">4.总线技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E9%A9%B1%E5%8A%A8%E5%92%8C%E6%8E%A7%E5%88%B6"><span class="toc-number">5.2.</span> <span class="toc-text">总线驱动和控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%9F%E8%BD%BD"><span class="toc-number">5.2.1.</span> <span class="toc-text">负载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A9%B1%E5%8A%A8%EF%BC%88%E9%87%8D%E7%82%B9%E6%98%AF%E6%9D%BF%E5%AD%90%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">5.2.2.</span> <span class="toc-text">驱动（重点是板子的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E8%8A%AF%E7%89%87"><span class="toc-number">5.2.2.1.</span> <span class="toc-text">常用芯片</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98"><span class="toc-number">5.2.2.2.</span> <span class="toc-text">例题</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%BD%951-%E8%8B%B1%E6%96%87%E6%9C%AF%E8%AF%AD"><span class="toc-number">6.</span> <span class="toc-text">附录1 英文术语</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/02/07/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9A%90%E7%A7%81%E4%BF%9D%E6%8A%A4%E5%AE%9E%E9%AA%8C%E4%B8%80/" title="大数据隐私保护实验一"><img src="/img/moon.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大数据隐私保护实验一"/></a><div class="content"><a class="title" href="/2023/02/07/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9A%90%E7%A7%81%E4%BF%9D%E6%8A%A4%E5%AE%9E%E9%AA%8C%E4%B8%80/" title="大数据隐私保护实验一">大数据隐私保护实验一</a><time datetime="2023-02-25T05:40:24.678Z" title="更新于 2023-02-25 13:40:24">2023-02-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/02/CSP-230202%E6%80%BB%E7%BB%93/" title="CSP-230202总结"><img src="https://w.wallhaven.cc/full/2y/wallhaven-2y8x99.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSP-230202总结"/></a><div class="content"><a class="title" href="/2023/02/02/CSP-230202%E6%80%BB%E7%BB%93/" title="CSP-230202总结">CSP-230202总结</a><time datetime="2023-02-02T03:02:32.690Z" title="更新于 2023-02-02 11:02:32">2023-02-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/24/CSP-230124%E6%80%BB%E7%BB%93/" title="CSP-230124总结"><img src="https://w.wallhaven.cc/full/jx/wallhaven-jx3l2y.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSP-230124总结"/></a><div class="content"><a class="title" href="/2023/01/24/CSP-230124%E6%80%BB%E7%BB%93/" title="CSP-230124总结">CSP-230124总结</a><time datetime="2023-02-02T02:51:34.639Z" title="更新于 2023-02-02 10:51:34">2023-02-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/17/%E5%90%8E%E9%87%8F%E5%AD%90%E5%AF%86%E7%A0%81-%E6%A0%BC%E5%AF%86%E7%A0%81%E5%AD%A6/" title="后量子密码-格密码学"><img src="/img/cloud.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="后量子密码-格密码学"/></a><div class="content"><a class="title" href="/2023/01/17/%E5%90%8E%E9%87%8F%E5%AD%90%E5%AF%86%E7%A0%81-%E6%A0%BC%E5%AF%86%E7%A0%81%E5%AD%A6/" title="后量子密码-格密码学">后量子密码-格密码学</a><time datetime="2023-01-24T11:04:53.717Z" title="更新于 2023-01-24 19:04:53">2023-01-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/12/CSP-2209/" title="CSP_2209"><img src="https://w.wallhaven.cc/full/j3/wallhaven-j3g7yy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSP_2209"/></a><div class="content"><a class="title" href="/2023/01/12/CSP-2209/" title="CSP_2209">CSP_2209</a><time datetime="2023-01-12T13:10:20.643Z" title="更新于 2023-01-12 21:10:20">2023-01-12</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://w.wallhaven.cc/full/gp/wallhaven-gp71rd.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By NexusLbh</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>